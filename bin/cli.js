#!/usr/bin/env node
import{createRequire as s3}from"node:module";var i3=Object.create;var{getPrototypeOf:c3,defineProperty:Fx,getOwnPropertyNames:p3}=Object;var o3=Object.prototype.hasOwnProperty;var i=(x,G,J)=>{J=x!=null?i3(c3(x)):{};let $=G||!x||!x.__esModule?Fx(J,"default",{value:x,enumerable:!0}):J;for(let N of p3(x))if(!o3.call($,N))Fx($,N,{get:()=>x[N],enumerable:!0});return $};var w=(x,G)=>()=>(G||x((G={exports:{}}).exports,G),G.exports);var y=s3(import.meta.url);var L1=w((v5,P0)=>{var a1=process||{},Px=a1.argv||[],r1=a1.env||{},r3=!(!!r1.NO_COLOR||Px.includes("--no-color"))&&(!!r1.FORCE_COLOR||Px.includes("--color")||a1.platform==="win32"||(a1.stdout||{}).isTTY&&r1.TERM!=="dumb"||!!r1.CI),a3=(x,G,J=x)=>($)=>{let N=""+$,Z=N.indexOf(G,x.length);return~Z?x+t3(N,G,J,Z)+G:x+N+G},t3=(x,G,J,$)=>{let N="",Z=0;do N+=x.substring(Z,$)+J,Z=$+G.length,$=x.indexOf(G,Z);while(~$);return N+x.substring(Z)},Wx=(x=r3)=>{let G=x?a3:()=>String;return{isColorSupported:x,reset:G("\x1B[0m","\x1B[0m"),bold:G("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:G("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:G("\x1B[3m","\x1B[23m"),underline:G("\x1B[4m","\x1B[24m"),inverse:G("\x1B[7m","\x1B[27m"),hidden:G("\x1B[8m","\x1B[28m"),strikethrough:G("\x1B[9m","\x1B[29m"),black:G("\x1B[30m","\x1B[39m"),red:G("\x1B[31m","\x1B[39m"),green:G("\x1B[32m","\x1B[39m"),yellow:G("\x1B[33m","\x1B[39m"),blue:G("\x1B[34m","\x1B[39m"),magenta:G("\x1B[35m","\x1B[39m"),cyan:G("\x1B[36m","\x1B[39m"),white:G("\x1B[37m","\x1B[39m"),gray:G("\x1B[90m","\x1B[39m"),bgBlack:G("\x1B[40m","\x1B[49m"),bgRed:G("\x1B[41m","\x1B[49m"),bgGreen:G("\x1B[42m","\x1B[49m"),bgYellow:G("\x1B[43m","\x1B[49m"),bgBlue:G("\x1B[44m","\x1B[49m"),bgMagenta:G("\x1B[45m","\x1B[49m"),bgCyan:G("\x1B[46m","\x1B[49m"),bgWhite:G("\x1B[47m","\x1B[49m"),blackBright:G("\x1B[90m","\x1B[39m"),redBright:G("\x1B[91m","\x1B[39m"),greenBright:G("\x1B[92m","\x1B[39m"),yellowBright:G("\x1B[93m","\x1B[39m"),blueBright:G("\x1B[94m","\x1B[39m"),magentaBright:G("\x1B[95m","\x1B[39m"),cyanBright:G("\x1B[96m","\x1B[39m"),whiteBright:G("\x1B[97m","\x1B[39m"),bgBlackBright:G("\x1B[100m","\x1B[49m"),bgRedBright:G("\x1B[101m","\x1B[49m"),bgGreenBright:G("\x1B[102m","\x1B[49m"),bgYellowBright:G("\x1B[103m","\x1B[49m"),bgBlueBright:G("\x1B[104m","\x1B[49m"),bgMagentaBright:G("\x1B[105m","\x1B[49m"),bgCyanBright:G("\x1B[106m","\x1B[49m"),bgWhiteBright:G("\x1B[107m","\x1B[49m")}};P0.exports=Wx();P0.exports.createColors=Wx});var S0=w((y5,Sx)=>{var W0={to(x,G){if(!G)return`\x1B[${x+1}G`;return`\x1B[${G+1};${x+1}H`},move(x,G){let J="";if(x<0)J+=`\x1B[${-x}D`;else if(x>0)J+=`\x1B[${x}C`;if(G<0)J+=`\x1B[${-G}A`;else if(G>0)J+=`\x1B[${G}B`;return J},up:(x=1)=>`\x1B[${x}A`,down:(x=1)=>`\x1B[${x}B`,forward:(x=1)=>`\x1B[${x}C`,backward:(x=1)=>`\x1B[${x}D`,nextLine:(x=1)=>"\x1B[E".repeat(x),prevLine:(x=1)=>"\x1B[F".repeat(x),left:"\x1B[G",hide:"\x1B[?25l",show:"\x1B[?25h",save:"\x1B7",restore:"\x1B8"},e3={up:(x=1)=>"\x1B[S".repeat(x),down:(x=1)=>"\x1B[T".repeat(x)},x4={screen:"\x1B[2J",up:(x=1)=>"\x1B[1J".repeat(x),down:(x=1)=>"\x1B[J".repeat(x),line:"\x1B[2K",lineEnd:"\x1B[K",lineStart:"\x1B[1K",lines(x){let G="";for(let J=0;J<x;J++)G+=this.line+(J<x-1?W0.up():"");if(x)G+=W0.left;return G}};Sx.exports={cursor:W0,scroll:e3,erase:x4,beep:"\x07"}});var x1=w((C8,w2)=>{var m2=["nodebuffer","arraybuffer","fragments"],u2=typeof Blob<"u";if(u2)m2.push("blob");w2.exports={BINARY_TYPES:m2,CLOSE_TIMEOUT:30000,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:u2,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var f1=w((Y8,V0)=>{var{EMPTY_BUFFER:h9}=x1(),zx=Buffer[Symbol.species];function n9(x,G){if(x.length===0)return h9;if(x.length===1)return x[0];let J=Buffer.allocUnsafe(G),$=0;for(let N=0;N<x.length;N++){let Z=x[N];J.set(Z,$),$+=Z.length}if($<G)return new zx(J.buffer,J.byteOffset,$);return J}function f2(x,G,J,$,N){for(let Z=0;Z<N;Z++)J[$+Z]=x[Z]^G[Z&3]}function b2(x,G){for(let J=0;J<x.length;J++)x[J]^=G[J&3]}function i9(x){if(x.length===x.buffer.byteLength)return x.buffer;return x.buffer.slice(x.byteOffset,x.byteOffset+x.length)}function Ix(x){if(Ix.readOnly=!0,Buffer.isBuffer(x))return x;let G;if(x instanceof ArrayBuffer)G=new zx(x);else if(ArrayBuffer.isView(x))G=new zx(x.buffer,x.byteOffset,x.byteLength);else G=Buffer.from(x),Ix.readOnly=!1;return G}V0.exports={concat:n9,mask:f2,toArrayBuffer:i9,toBuffer:Ix,unmask:b2};if(!process.env.WS_NO_BUFFER_UTIL)try{let x=(()=>{throw new Error("Cannot require module "+"bufferutil");})();V0.exports.mask=function(G,J,$,N,Z){if(Z<48)f2(G,J,$,N,Z);else x.mask(G,J,$,N,Z)},V0.exports.unmask=function(G,J){if(G.length<32)b2(G,J);else x.unmask(G,J)}}catch(x){}});var h2=w((H8,k2)=>{var l2=Symbol("kDone"),Kx=Symbol("kRun");class d2{constructor(x){this[l2]=()=>{this.pending--,this[Kx]()},this.concurrency=x||1/0,this.jobs=[],this.pending=0}add(x){this.jobs.push(x),this[Kx]()}[Kx](){if(this.pending===this.concurrency)return;if(this.jobs.length){let x=this.jobs.shift();this.pending++,x(this[l2])}}}k2.exports=d2});var l1=w((V8,o2)=>{var b1=y("zlib"),n2=f1(),c9=h2(),{kStatusCode:i2}=x1(),p9=Buffer[Symbol.species],o9=Buffer.from([0,0,255,255]),R0=Symbol("permessage-deflate"),G1=Symbol("total-length"),M1=Symbol("callback"),Z1=Symbol("buffers"),q1=Symbol("error"),O0;class c2{constructor(x,G,J){if(this._maxPayload=J|0,this._options=x||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!G,this._deflate=null,this._inflate=null,this.params=null,!O0){let $=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;O0=new c9($)}}static get extensionName(){return"permessage-deflate"}offer(){let x={};if(this._options.serverNoContextTakeover)x.server_no_context_takeover=!0;if(this._options.clientNoContextTakeover)x.client_no_context_takeover=!0;if(this._options.serverMaxWindowBits)x.server_max_window_bits=this._options.serverMaxWindowBits;if(this._options.clientMaxWindowBits)x.client_max_window_bits=this._options.clientMaxWindowBits;else if(this._options.clientMaxWindowBits==null)x.client_max_window_bits=!0;return x}accept(x){return x=this.normalizeParams(x),this.params=this._isServer?this.acceptAsServer(x):this.acceptAsClient(x),this.params}cleanup(){if(this._inflate)this._inflate.close(),this._inflate=null;if(this._deflate){let x=this._deflate[M1];if(this._deflate.close(),this._deflate=null,x)x(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(x){let G=this._options,J=x.find(($)=>{if(G.serverNoContextTakeover===!1&&$.server_no_context_takeover||$.server_max_window_bits&&(G.serverMaxWindowBits===!1||typeof G.serverMaxWindowBits==="number"&&G.serverMaxWindowBits>$.server_max_window_bits)||typeof G.clientMaxWindowBits==="number"&&!$.client_max_window_bits)return!1;return!0});if(!J)throw Error("None of the extension offers can be accepted");if(G.serverNoContextTakeover)J.server_no_context_takeover=!0;if(G.clientNoContextTakeover)J.client_no_context_takeover=!0;if(typeof G.serverMaxWindowBits==="number")J.server_max_window_bits=G.serverMaxWindowBits;if(typeof G.clientMaxWindowBits==="number")J.client_max_window_bits=G.clientMaxWindowBits;else if(J.client_max_window_bits===!0||G.clientMaxWindowBits===!1)delete J.client_max_window_bits;return J}acceptAsClient(x){let G=x[0];if(this._options.clientNoContextTakeover===!1&&G.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(!G.client_max_window_bits){if(typeof this._options.clientMaxWindowBits==="number")G.client_max_window_bits=this._options.clientMaxWindowBits}else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits==="number"&&G.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"');return G}normalizeParams(x){return x.forEach((G)=>{Object.keys(G).forEach((J)=>{let $=G[J];if($.length>1)throw Error(`Parameter "${J}" must have only a single value`);if($=$[0],J==="client_max_window_bits"){if($!==!0){let N=+$;if(!Number.isInteger(N)||N<8||N>15)throw TypeError(`Invalid value for parameter "${J}": ${$}`);$=N}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${J}": ${$}`)}else if(J==="server_max_window_bits"){let N=+$;if(!Number.isInteger(N)||N<8||N>15)throw TypeError(`Invalid value for parameter "${J}": ${$}`);$=N}else if(J==="client_no_context_takeover"||J==="server_no_context_takeover"){if($!==!0)throw TypeError(`Invalid value for parameter "${J}": ${$}`)}else throw Error(`Unknown parameter "${J}"`);G[J]=$})}),x}decompress(x,G,J){O0.add(($)=>{this._decompress(x,G,(N,Z)=>{$(),J(N,Z)})})}compress(x,G,J){O0.add(($)=>{this._compress(x,G,(N,Z)=>{$(),J(N,Z)})})}_decompress(x,G,J){let $=this._isServer?"client":"server";if(!this._inflate){let N=`${$}_max_window_bits`,Z=typeof this.params[N]!=="number"?b1.Z_DEFAULT_WINDOWBITS:this.params[N];this._inflate=b1.createInflateRaw({...this._options.zlibInflateOptions,windowBits:Z}),this._inflate[R0]=this,this._inflate[G1]=0,this._inflate[Z1]=[],this._inflate.on("error",r9),this._inflate.on("data",p2)}if(this._inflate[M1]=J,this._inflate.write(x),G)this._inflate.write(o9);this._inflate.flush(()=>{let N=this._inflate[q1];if(N){this._inflate.close(),this._inflate=null,J(N);return}let Z=n2.concat(this._inflate[Z1],this._inflate[G1]);if(this._inflate._readableState.endEmitted)this._inflate.close(),this._inflate=null;else if(this._inflate[G1]=0,this._inflate[Z1]=[],G&&this.params[`${$}_no_context_takeover`])this._inflate.reset();J(null,Z)})}_compress(x,G,J){let $=this._isServer?"server":"client";if(!this._deflate){let N=`${$}_max_window_bits`,Z=typeof this.params[N]!=="number"?b1.Z_DEFAULT_WINDOWBITS:this.params[N];this._deflate=b1.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:Z}),this._deflate[G1]=0,this._deflate[Z1]=[],this._deflate.on("data",s9)}this._deflate[M1]=J,this._deflate.write(x),this._deflate.flush(b1.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let N=n2.concat(this._deflate[Z1],this._deflate[G1]);if(G)N=new p9(N.buffer,N.byteOffset,N.length-4);if(this._deflate[M1]=null,this._deflate[G1]=0,this._deflate[Z1]=[],G&&this.params[`${$}_no_context_takeover`])this._deflate.reset();J(null,N)})}}o2.exports=c2;function s9(x){this[Z1].push(x),this[G1]+=x.length}function p2(x){if(this[G1]+=x.length,this[R0]._maxPayload<1||this[G1]<=this[R0]._maxPayload){this[Z1].push(x);return}this[q1]=RangeError("Max payload size exceeded"),this[q1].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[q1][i2]=1009,this.removeListener("data",p2),this.reset()}function r9(x){if(this[R0]._inflate=null,this[q1]){this[M1](this[q1]);return}x[i2]=1007,this[M1](x)}});var B1=w((O8,M0)=>{var{isUtf8:s2}=y("buffer"),{hasBlob:a9}=x1(),t9=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function e9(x){return x>=1000&&x<=1014&&x!==1004&&x!==1005&&x!==1006||x>=3000&&x<=4999}function jx(x){let G=x.length,J=0;while(J<G)if((x[J]&128)===0)J++;else if((x[J]&224)===192){if(J+1===G||(x[J+1]&192)!==128||(x[J]&254)===192)return!1;J+=2}else if((x[J]&240)===224){if(J+2>=G||(x[J+1]&192)!==128||(x[J+2]&192)!==128||x[J]===224&&(x[J+1]&224)===128||x[J]===237&&(x[J+1]&224)===160)return!1;J+=3}else if((x[J]&248)===240){if(J+3>=G||(x[J+1]&192)!==128||(x[J+2]&192)!==128||(x[J+3]&192)!==128||x[J]===240&&(x[J+1]&240)===128||x[J]===244&&x[J+1]>143||x[J]>244)return!1;J+=4}else return!1;return!0}function x6(x){return a9&&typeof x==="object"&&typeof x.arrayBuffer==="function"&&typeof x.type==="string"&&typeof x.stream==="function"&&(x[Symbol.toStringTag]==="Blob"||x[Symbol.toStringTag]==="File")}M0.exports={isBlob:x6,isValidStatusCode:e9,isValidUTF8:jx,tokenChars:t9};if(s2)M0.exports.isValidUTF8=function(x){return x.length<24?jx(x):s2(x)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let x=(()=>{throw new Error("Cannot require module "+"utf-8-validate");})();M0.exports.isValidUTF8=function(G){return G.length<32?jx(G):x(G)}}catch(x){}});var Cx=w((R8,x3)=>{var{Writable:G6}=y("stream"),r2=l1(),{BINARY_TYPES:J6,EMPTY_BUFFER:a2,kStatusCode:$6,kWebSocket:N6}=x1(),{concat:gx,toArrayBuffer:Z6,unmask:Q6}=f1(),{isValidStatusCode:X6,isValidUTF8:t2}=B1(),q0=Buffer[Symbol.species];class e2 extends G6{constructor(x={}){super();this._allowSynchronousEvents=x.allowSynchronousEvents!==void 0?x.allowSynchronousEvents:!0,this._binaryType=x.binaryType||J6[0],this._extensions=x.extensions||{},this._isServer=!!x.isServer,this._maxPayload=x.maxPayload|0,this._skipUTF8Validation=!!x.skipUTF8Validation,this[N6]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(x,G,J){if(this._opcode===8&&this._state==0)return J();this._bufferedBytes+=x.length,this._buffers.push(x),this.startLoop(J)}consume(x){if(this._bufferedBytes-=x,x===this._buffers[0].length)return this._buffers.shift();if(x<this._buffers[0].length){let J=this._buffers[0];return this._buffers[0]=new q0(J.buffer,J.byteOffset+x,J.length-x),new q0(J.buffer,J.byteOffset,x)}let G=Buffer.allocUnsafe(x);do{let J=this._buffers[0],$=G.length-x;if(x>=J.length)G.set(this._buffers.shift(),$);else G.set(new Uint8Array(J.buffer,J.byteOffset,x),$),this._buffers[0]=new q0(J.buffer,J.byteOffset+x,J.length-x);x-=J.length}while(x>0);return G}startLoop(x){this._loop=!0;do switch(this._state){case 0:this.getInfo(x);break;case 1:this.getPayloadLength16(x);break;case 2:this.getPayloadLength64(x);break;case 3:this.getMask();break;case 4:this.getData(x);break;case 5:case 6:this._loop=!1;return}while(this._loop);if(!this._errored)x()}getInfo(x){if(this._bufferedBytes<2){this._loop=!1;return}let G=this.consume(2);if((G[0]&48)!==0){let $=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");x($);return}let J=(G[0]&64)===64;if(J&&!this._extensions[r2.extensionName]){let $=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");x($);return}if(this._fin=(G[0]&128)===128,this._opcode=G[0]&15,this._payloadLength=G[1]&127,this._opcode===0){if(J){let $=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");x($);return}if(!this._fragmented){let $=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");x($);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let $=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");x($);return}this._compressed=J}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let $=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");x($);return}if(J){let $=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");x($);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let $=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");x($);return}}else{let $=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");x($);return}if(!this._fin&&!this._fragmented)this._fragmented=this._opcode;if(this._masked=(G[1]&128)===128,this._isServer){if(!this._masked){let $=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");x($);return}}else if(this._masked){let $=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");x($);return}if(this._payloadLength===126)this._state=1;else if(this._payloadLength===127)this._state=2;else this.haveLength(x)}getPayloadLength16(x){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(x)}getPayloadLength64(x){if(this._bufferedBytes<8){this._loop=!1;return}let G=this.consume(8),J=G.readUInt32BE(0);if(J>Math.pow(2,21)-1){let $=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");x($);return}this._payloadLength=J*Math.pow(2,32)+G.readUInt32BE(4),this.haveLength(x)}haveLength(x){if(this._payloadLength&&this._opcode<8){if(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0){let G=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");x(G);return}}if(this._masked)this._state=3;else this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(x){let G=a2;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}if(G=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0)Q6(G,this._mask)}if(this._opcode>7){this.controlMessage(G,x);return}if(this._compressed){this._state=5,this.decompress(G,x);return}if(G.length)this._messageLength=this._totalPayloadLength,this._fragments.push(G);this.dataMessage(x)}decompress(x,G){this._extensions[r2.extensionName].decompress(x,this._fin,($,N)=>{if($)return G($);if(N.length){if(this._messageLength+=N.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let Z=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");G(Z);return}this._fragments.push(N)}if(this.dataMessage(G),this._state===0)this.startLoop(G)})}dataMessage(x){if(!this._fin){this._state=0;return}let G=this._messageLength,J=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let $;if(this._binaryType==="nodebuffer")$=gx(J,G);else if(this._binaryType==="arraybuffer")$=Z6(gx(J,G));else if(this._binaryType==="blob")$=new Blob(J);else $=J;if(this._allowSynchronousEvents)this.emit("message",$,!0),this._state=0;else this._state=6,setImmediate(()=>{this.emit("message",$,!0),this._state=0,this.startLoop(x)})}else{let $=gx(J,G);if(!this._skipUTF8Validation&&!t2($)){let N=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");x(N);return}if(this._state===5||this._allowSynchronousEvents)this.emit("message",$,!1),this._state=0;else this._state=6,setImmediate(()=>{this.emit("message",$,!1),this._state=0,this.startLoop(x)})}}controlMessage(x,G){if(this._opcode===8){if(x.length===0)this._loop=!1,this.emit("conclude",1005,a2),this.end();else{let J=x.readUInt16BE(0);if(!X6(J)){let N=this.createError(RangeError,`invalid status code ${J}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");G(N);return}let $=new q0(x.buffer,x.byteOffset+2,x.length-2);if(!this._skipUTF8Validation&&!t2($)){let N=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");G(N);return}this._loop=!1,this.emit("conclude",J,$),this.end()}this._state=0;return}if(this._allowSynchronousEvents)this.emit(this._opcode===9?"ping":"pong",x),this._state=0;else this._state=6,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",x),this._state=0,this.startLoop(G)})}createError(x,G,J,$,N){this._loop=!1,this._errored=!0;let Z=new x(J?`Invalid WebSocket frame: ${G}`:G);return Error.captureStackTrace(Z,this.createError),Z.code=N,Z[$6]=$,Z}}x3.exports=e2});var Hx=w((q8,$3)=>{var{Duplex:M8}=y("stream"),{randomFillSync:z6}=y("crypto"),G3=l1(),{EMPTY_BUFFER:I6,kWebSocket:K6,NOOP:j6}=x1(),{isBlob:U1,isValidStatusCode:g6}=B1(),{mask:J3,toBuffer:C1}=f1(),n=Symbol("kByteLength"),C6=Buffer.alloc(4),Y1,A1=8192,p=0,Y6=1,H6=2;class Q1{constructor(x,G,J){if(this._extensions=G||{},J)this._generateMask=J,this._maskBuffer=Buffer.alloc(4);this._socket=x,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=p,this.onerror=j6,this[K6]=void 0}static frame(x,G){let J,$=!1,N=2,Z=!1;if(G.mask){if(J=G.maskBuffer||C6,G.generateMask)G.generateMask(J);else{if(A1===8192){if(Y1===void 0)Y1=Buffer.alloc(8192);z6(Y1,0,8192),A1=0}J[0]=Y1[A1++],J[1]=Y1[A1++],J[2]=Y1[A1++],J[3]=Y1[A1++]}Z=(J[0]|J[1]|J[2]|J[3])===0,N=6}let Q;if(typeof x==="string")if((!G.mask||Z)&&G[n]!==void 0)Q=G[n];else x=Buffer.from(x),Q=x.length;else Q=x.length,$=G.mask&&G.readOnly&&!Z;let X=Q;if(Q>=65536)N+=8,X=127;else if(Q>125)N+=2,X=126;let z=Buffer.allocUnsafe($?Q+N:N);if(z[0]=G.fin?G.opcode|128:G.opcode,G.rsv1)z[0]|=64;if(z[1]=X,X===126)z.writeUInt16BE(Q,2);else if(X===127)z[2]=z[3]=0,z.writeUIntBE(Q,4,6);if(!G.mask)return[z,x];if(z[1]|=128,z[N-4]=J[0],z[N-3]=J[1],z[N-2]=J[2],z[N-1]=J[3],Z)return[z,x];if($)return J3(x,J,z,N,Q),[z];return J3(x,J,x,0,Q),[z,x]}close(x,G,J,$){let N;if(x===void 0)N=I6;else if(typeof x!=="number"||!g6(x))throw TypeError("First argument must be a valid error code number");else if(G===void 0||!G.length)N=Buffer.allocUnsafe(2),N.writeUInt16BE(x,0);else{let Q=Buffer.byteLength(G);if(Q>123)throw RangeError("The message must not be greater than 123 bytes");if(N=Buffer.allocUnsafe(2+Q),N.writeUInt16BE(x,0),typeof G==="string")N.write(G,2);else N.set(G,2)}let Z={[n]:N.length,fin:!0,generateMask:this._generateMask,mask:J,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};if(this._state!==p)this.enqueue([this.dispatch,N,!1,Z,$]);else this.sendFrame(Q1.frame(N,Z),$)}ping(x,G,J){let $,N;if(typeof x==="string")$=Buffer.byteLength(x),N=!1;else if(U1(x))$=x.size,N=!1;else x=C1(x),$=x.length,N=C1.readOnly;if($>125)throw RangeError("The data size must not be greater than 125 bytes");let Z={[n]:$,fin:!0,generateMask:this._generateMask,mask:G,maskBuffer:this._maskBuffer,opcode:9,readOnly:N,rsv1:!1};if(U1(x))if(this._state!==p)this.enqueue([this.getBlobData,x,!1,Z,J]);else this.getBlobData(x,!1,Z,J);else if(this._state!==p)this.enqueue([this.dispatch,x,!1,Z,J]);else this.sendFrame(Q1.frame(x,Z),J)}pong(x,G,J){let $,N;if(typeof x==="string")$=Buffer.byteLength(x),N=!1;else if(U1(x))$=x.size,N=!1;else x=C1(x),$=x.length,N=C1.readOnly;if($>125)throw RangeError("The data size must not be greater than 125 bytes");let Z={[n]:$,fin:!0,generateMask:this._generateMask,mask:G,maskBuffer:this._maskBuffer,opcode:10,readOnly:N,rsv1:!1};if(U1(x))if(this._state!==p)this.enqueue([this.getBlobData,x,!1,Z,J]);else this.getBlobData(x,!1,Z,J);else if(this._state!==p)this.enqueue([this.dispatch,x,!1,Z,J]);else this.sendFrame(Q1.frame(x,Z),J)}send(x,G,J){let $=this._extensions[G3.extensionName],N=G.binary?2:1,Z=G.compress,Q,X;if(typeof x==="string")Q=Buffer.byteLength(x),X=!1;else if(U1(x))Q=x.size,X=!1;else x=C1(x),Q=x.length,X=C1.readOnly;if(this._firstFragment){if(this._firstFragment=!1,Z&&$&&$.params[$._isServer?"server_no_context_takeover":"client_no_context_takeover"])Z=Q>=$._threshold;this._compress=Z}else Z=!1,N=0;if(G.fin)this._firstFragment=!0;let z={[n]:Q,fin:G.fin,generateMask:this._generateMask,mask:G.mask,maskBuffer:this._maskBuffer,opcode:N,readOnly:X,rsv1:Z};if(U1(x))if(this._state!==p)this.enqueue([this.getBlobData,x,this._compress,z,J]);else this.getBlobData(x,this._compress,z,J);else if(this._state!==p)this.enqueue([this.dispatch,x,this._compress,z,J]);else this.dispatch(x,this._compress,z,J)}getBlobData(x,G,J,$){this._bufferedBytes+=J[n],this._state=H6,x.arrayBuffer().then((N)=>{if(this._socket.destroyed){let Q=Error("The socket was closed while the blob was being read");process.nextTick(Yx,this,Q,$);return}this._bufferedBytes-=J[n];let Z=C1(N);if(!G)this._state=p,this.sendFrame(Q1.frame(Z,J),$),this.dequeue();else this.dispatch(Z,G,J,$)}).catch((N)=>{process.nextTick(V6,this,N,$)})}dispatch(x,G,J,$){if(!G){this.sendFrame(Q1.frame(x,J),$);return}let N=this._extensions[G3.extensionName];this._bufferedBytes+=J[n],this._state=Y6,N.compress(x,J.fin,(Z,Q)=>{if(this._socket.destroyed){let X=Error("The socket was closed while data was being compressed");Yx(this,X,$);return}this._bufferedBytes-=J[n],this._state=p,J.readOnly=!1,this.sendFrame(Q1.frame(Q,J),$),this.dequeue()})}dequeue(){while(this._state===p&&this._queue.length){let x=this._queue.shift();this._bufferedBytes-=x[3][n],Reflect.apply(x[0],this,x.slice(1))}}enqueue(x){this._bufferedBytes+=x[3][n],this._queue.push(x)}sendFrame(x,G){if(x.length===2)this._socket.cork(),this._socket.write(x[0]),this._socket.write(x[1],G),this._socket.uncork();else this._socket.write(x[0],G)}}$3.exports=Q1;function Yx(x,G,J){if(typeof J==="function")J(G);for(let $=0;$<x._queue.length;$++){let N=x._queue[$],Z=N[N.length-1];if(typeof Z==="function")Z(G)}}function V6(x,G,J){Yx(x,G,J),x.onerror(G)}});var g3=w((B8,j3)=>{var{kForOnEventAttribute:d1,kListener:Vx}=x1(),N3=Symbol("kCode"),Z3=Symbol("kData"),Q3=Symbol("kError"),X3=Symbol("kMessage"),z3=Symbol("kReason"),D1=Symbol("kTarget"),I3=Symbol("kType"),K3=Symbol("kWasClean");class X1{constructor(x){this[D1]=null,this[I3]=x}get target(){return this[D1]}get type(){return this[I3]}}Object.defineProperty(X1.prototype,"target",{enumerable:!0});Object.defineProperty(X1.prototype,"type",{enumerable:!0});class T1 extends X1{constructor(x,G={}){super(x);this[N3]=G.code===void 0?0:G.code,this[z3]=G.reason===void 0?"":G.reason,this[K3]=G.wasClean===void 0?!1:G.wasClean}get code(){return this[N3]}get reason(){return this[z3]}get wasClean(){return this[K3]}}Object.defineProperty(T1.prototype,"code",{enumerable:!0});Object.defineProperty(T1.prototype,"reason",{enumerable:!0});Object.defineProperty(T1.prototype,"wasClean",{enumerable:!0});class k1 extends X1{constructor(x,G={}){super(x);this[Q3]=G.error===void 0?null:G.error,this[X3]=G.message===void 0?"":G.message}get error(){return this[Q3]}get message(){return this[X3]}}Object.defineProperty(k1.prototype,"error",{enumerable:!0});Object.defineProperty(k1.prototype,"message",{enumerable:!0});class U0 extends X1{constructor(x,G={}){super(x);this[Z3]=G.data===void 0?null:G.data}get data(){return this[Z3]}}Object.defineProperty(U0.prototype,"data",{enumerable:!0});var O6={addEventListener(x,G,J={}){for(let N of this.listeners(x))if(!J[d1]&&N[Vx]===G&&!N[d1])return;let $;if(x==="message")$=function(Z,Q){let X=new U0("message",{data:Q?Z:Z.toString()});X[D1]=this,B0(G,this,X)};else if(x==="close")$=function(Z,Q){let X=new T1("close",{code:Z,reason:Q.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});X[D1]=this,B0(G,this,X)};else if(x==="error")$=function(Z){let Q=new k1("error",{error:Z,message:Z.message});Q[D1]=this,B0(G,this,Q)};else if(x==="open")$=function(){let Z=new X1("open");Z[D1]=this,B0(G,this,Z)};else return;if($[d1]=!!J[d1],$[Vx]=G,J.once)this.once(x,$);else this.on(x,$)},removeEventListener(x,G){for(let J of this.listeners(x))if(J[Vx]===G&&!J[d1]){this.removeListener(x,J);break}}};j3.exports={CloseEvent:T1,ErrorEvent:k1,Event:X1,EventTarget:O6,MessageEvent:U0};function B0(x,G,J){if(typeof x==="object"&&x.handleEvent)x.handleEvent.call(x,J);else x.call(G,J)}});var Ox=w((U8,C3)=>{var{tokenChars:h1}=B1();function a(x,G,J){if(x[G]===void 0)x[G]=[J];else x[G].push(J)}function R6(x){let G=Object.create(null),J=Object.create(null),$=!1,N=!1,Z=!1,Q,X,z=-1,I=-1,C=-1,K=0;for(;K<x.length;K++)if(I=x.charCodeAt(K),Q===void 0)if(C===-1&&h1[I]===1){if(z===-1)z=K}else if(K!==0&&(I===32||I===9)){if(C===-1&&z!==-1)C=K}else if(I===59||I===44){if(z===-1)throw SyntaxError(`Unexpected character at index ${K}`);if(C===-1)C=K;let R=x.slice(z,C);if(I===44)a(G,R,J),J=Object.create(null);else Q=R;z=C=-1}else throw SyntaxError(`Unexpected character at index ${K}`);else if(X===void 0)if(C===-1&&h1[I]===1){if(z===-1)z=K}else if(I===32||I===9){if(C===-1&&z!==-1)C=K}else if(I===59||I===44){if(z===-1)throw SyntaxError(`Unexpected character at index ${K}`);if(C===-1)C=K;if(a(J,x.slice(z,C),!0),I===44)a(G,Q,J),J=Object.create(null),Q=void 0;z=C=-1}else if(I===61&&z!==-1&&C===-1)X=x.slice(z,K),z=C=-1;else throw SyntaxError(`Unexpected character at index ${K}`);else if(N){if(h1[I]!==1)throw SyntaxError(`Unexpected character at index ${K}`);if(z===-1)z=K;else if(!$)$=!0;N=!1}else if(Z)if(h1[I]===1){if(z===-1)z=K}else if(I===34&&z!==-1)Z=!1,C=K;else if(I===92)N=!0;else throw SyntaxError(`Unexpected character at index ${K}`);else if(I===34&&x.charCodeAt(K-1)===61)Z=!0;else if(C===-1&&h1[I]===1){if(z===-1)z=K}else if(z!==-1&&(I===32||I===9)){if(C===-1)C=K}else if(I===59||I===44){if(z===-1)throw SyntaxError(`Unexpected character at index ${K}`);if(C===-1)C=K;let R=x.slice(z,C);if($)R=R.replace(/\\/g,""),$=!1;if(a(J,X,R),I===44)a(G,Q,J),J=Object.create(null),Q=void 0;X=void 0,z=C=-1}else throw SyntaxError(`Unexpected character at index ${K}`);if(z===-1||Z||I===32||I===9)throw SyntaxError("Unexpected end of input");if(C===-1)C=K;let H=x.slice(z,C);if(Q===void 0)a(G,H,J);else{if(X===void 0)a(J,H,!0);else if($)a(J,X,H.replace(/\\/g,""));else a(J,X,H);a(G,Q,J)}return G}function M6(x){return Object.keys(x).map((G)=>{let J=x[G];if(!Array.isArray(J))J=[J];return J.map(($)=>{return[G].concat(Object.keys($).map((N)=>{let Z=$[N];if(!Array.isArray(Z))Z=[Z];return Z.map((Q)=>Q===!0?N:`${N}=${Q}`).join("; ")})).join("; ")}).join(", ")}).join(", ")}C3.exports={format:M6,parse:R6}});var _0=w((T8,T3)=>{var q6=y("events"),B6=y("https"),U6=y("http"),V3=y("net"),A6=y("tls"),{randomBytes:D6,createHash:T6}=y("crypto"),{Duplex:A8,Readable:D8}=y("stream"),{URL:Rx}=y("url"),z1=l1(),_6=Cx(),L6=Hx(),{isBlob:F6}=B1(),{BINARY_TYPES:Y3,CLOSE_TIMEOUT:P6,EMPTY_BUFFER:A0,GUID:W6,kForOnEventAttribute:Mx,kListener:S6,kStatusCode:v6,kWebSocket:m,NOOP:O3}=x1(),{EventTarget:{addEventListener:y6,removeEventListener:E6}}=g3(),{format:m6,parse:u6}=Ox(),{toBuffer:w6}=f1(),R3=Symbol("kAborted"),qx=[8,13],J1=["CONNECTING","OPEN","CLOSING","CLOSED"],f6=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class U extends q6{constructor(x,G,J){super();if(this._binaryType=Y3[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=A0,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=U.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,x!==null){if(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,G===void 0)G=[];else if(!Array.isArray(G))if(typeof G==="object"&&G!==null)J=G,G=[];else G=[G];M3(this,x,G,J)}else this._autoPong=J.autoPong,this._closeTimeout=J.closeTimeout,this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(x){if(!Y3.includes(x))return;if(this._binaryType=x,this._receiver)this._receiver._binaryType=x}get bufferedAmount(){if(!this._socket)return this._bufferedAmount;return this._socket._writableState.length+this._sender._bufferedBytes}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(x,G,J){let $=new _6({allowSynchronousEvents:J.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:J.maxPayload,skipUTF8Validation:J.skipUTF8Validation}),N=new L6(x,this._extensions,J.generateMask);if(this._receiver=$,this._sender=N,this._socket=x,$[m]=this,N[m]=this,x[m]=this,$.on("conclude",d6),$.on("drain",k6),$.on("error",h6),$.on("message",n6),$.on("ping",i6),$.on("pong",c6),N.onerror=p6,x.setTimeout)x.setTimeout(0);if(x.setNoDelay)x.setNoDelay();if(G.length>0)x.unshift(G);x.on("close",U3),x.on("data",T0),x.on("end",A3),x.on("error",D3),this._readyState=U.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=U.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}if(this._extensions[z1.extensionName])this._extensions[z1.extensionName].cleanup();this._receiver.removeAllListeners(),this._readyState=U.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(x,G){if(this.readyState===U.CLOSED)return;if(this.readyState===U.CONNECTING){d(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===U.CLOSING){if(this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted))this._socket.end();return}this._readyState=U.CLOSING,this._sender.close(x,G,!this._isServer,(J)=>{if(J)return;if(this._closeFrameSent=!0,this._closeFrameReceived||this._receiver._writableState.errorEmitted)this._socket.end()}),B3(this)}pause(){if(this.readyState===U.CONNECTING||this.readyState===U.CLOSED)return;this._paused=!0,this._socket.pause()}ping(x,G,J){if(this.readyState===U.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof x==="function")J=x,x=G=void 0;else if(typeof G==="function")J=G,G=void 0;if(typeof x==="number")x=x.toString();if(this.readyState!==U.OPEN){Bx(this,x,J);return}if(G===void 0)G=!this._isServer;this._sender.ping(x||A0,G,J)}pong(x,G,J){if(this.readyState===U.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof x==="function")J=x,x=G=void 0;else if(typeof G==="function")J=G,G=void 0;if(typeof x==="number")x=x.toString();if(this.readyState!==U.OPEN){Bx(this,x,J);return}if(G===void 0)G=!this._isServer;this._sender.pong(x||A0,G,J)}resume(){if(this.readyState===U.CONNECTING||this.readyState===U.CLOSED)return;if(this._paused=!1,!this._receiver._writableState.needDrain)this._socket.resume()}send(x,G,J){if(this.readyState===U.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof G==="function")J=G,G={};if(typeof x==="number")x=x.toString();if(this.readyState!==U.OPEN){Bx(this,x,J);return}let $={binary:typeof x!=="string",mask:!this._isServer,compress:!0,fin:!0,...G};if(!this._extensions[z1.extensionName])$.compress=!1;this._sender.send(x||A0,$,J)}terminate(){if(this.readyState===U.CLOSED)return;if(this.readyState===U.CONNECTING){d(this,this._req,"WebSocket was closed before the connection was established");return}if(this._socket)this._readyState=U.CLOSING,this._socket.destroy()}}Object.defineProperty(U,"CONNECTING",{enumerable:!0,value:J1.indexOf("CONNECTING")});Object.defineProperty(U.prototype,"CONNECTING",{enumerable:!0,value:J1.indexOf("CONNECTING")});Object.defineProperty(U,"OPEN",{enumerable:!0,value:J1.indexOf("OPEN")});Object.defineProperty(U.prototype,"OPEN",{enumerable:!0,value:J1.indexOf("OPEN")});Object.defineProperty(U,"CLOSING",{enumerable:!0,value:J1.indexOf("CLOSING")});Object.defineProperty(U.prototype,"CLOSING",{enumerable:!0,value:J1.indexOf("CLOSING")});Object.defineProperty(U,"CLOSED",{enumerable:!0,value:J1.indexOf("CLOSED")});Object.defineProperty(U.prototype,"CLOSED",{enumerable:!0,value:J1.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((x)=>{Object.defineProperty(U.prototype,x,{enumerable:!0})});["open","error","close","message"].forEach((x)=>{Object.defineProperty(U.prototype,`on${x}`,{enumerable:!0,get(){for(let G of this.listeners(x))if(G[Mx])return G[S6];return null},set(G){for(let J of this.listeners(x))if(J[Mx]){this.removeListener(x,J);break}if(typeof G!=="function")return;this.addEventListener(x,G,{[Mx]:!0})}})});U.prototype.addEventListener=y6;U.prototype.removeEventListener=E6;T3.exports=U;function M3(x,G,J,$){let N={allowSynchronousEvents:!0,autoPong:!0,closeTimeout:P6,protocolVersion:qx[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...$,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(x._autoPong=N.autoPong,x._closeTimeout=N.closeTimeout,!qx.includes(N.protocolVersion))throw RangeError(`Unsupported protocol version: ${N.protocolVersion} (supported versions: ${qx.join(", ")})`);let Z;if(G instanceof Rx)Z=G;else try{Z=new Rx(G)}catch(j){throw SyntaxError(`Invalid URL: ${G}`)}if(Z.protocol==="http:")Z.protocol="ws:";else if(Z.protocol==="https:")Z.protocol="wss:";x._url=Z.href;let Q=Z.protocol==="wss:",X=Z.protocol==="ws+unix:",z;if(Z.protocol!=="ws:"&&!Q&&!X)z=`The URL's protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"`;else if(X&&!Z.pathname)z="The URL's pathname is empty";else if(Z.hash)z="The URL contains a fragment identifier";if(z){let j=SyntaxError(z);if(x._redirects===0)throw j;else{D0(x,j);return}}let I=Q?443:80,C=D6(16).toString("base64"),K=Q?B6.request:U6.request,H=new Set,R;if(N.createConnection=N.createConnection||(Q?l6:b6),N.defaultPort=N.defaultPort||I,N.port=Z.port||I,N.host=Z.hostname.startsWith("[")?Z.hostname.slice(1,-1):Z.hostname,N.headers={...N.headers,"Sec-WebSocket-Version":N.protocolVersion,"Sec-WebSocket-Key":C,Connection:"Upgrade",Upgrade:"websocket"},N.path=Z.pathname+Z.search,N.timeout=N.handshakeTimeout,N.perMessageDeflate)R=new z1(N.perMessageDeflate!==!0?N.perMessageDeflate:{},!1,N.maxPayload),N.headers["Sec-WebSocket-Extensions"]=m6({[z1.extensionName]:R.offer()});if(J.length){for(let j of J){if(typeof j!=="string"||!f6.test(j)||H.has(j))throw SyntaxError("An invalid or duplicated subprotocol was specified");H.add(j)}N.headers["Sec-WebSocket-Protocol"]=J.join(",")}if(N.origin)if(N.protocolVersion<13)N.headers["Sec-WebSocket-Origin"]=N.origin;else N.headers.Origin=N.origin;if(Z.username||Z.password)N.auth=`${Z.username}:${Z.password}`;if(X){let j=N.path.split(":");N.socketPath=j[0],N.path=j[1]}let g;if(N.followRedirects){if(x._redirects===0){x._originalIpc=X,x._originalSecure=Q,x._originalHostOrSocketPath=X?N.socketPath:Z.host;let j=$&&$.headers;if($={...$,headers:{}},j)for(let[O,B]of Object.entries(j))$.headers[O.toLowerCase()]=B}else if(x.listenerCount("redirect")===0){let j=X?x._originalIpc?N.socketPath===x._originalHostOrSocketPath:!1:x._originalIpc?!1:Z.host===x._originalHostOrSocketPath;if(!j||x._originalSecure&&!Q){if(delete N.headers.authorization,delete N.headers.cookie,!j)delete N.headers.host;N.auth=void 0}}if(N.auth&&!$.headers.authorization)$.headers.authorization="Basic "+Buffer.from(N.auth).toString("base64");if(g=x._req=K(N),x._redirects)x.emit("redirect",x.url,g)}else g=x._req=K(N);if(N.timeout)g.on("timeout",()=>{d(x,g,"Opening handshake has timed out")});if(g.on("error",(j)=>{if(g===null||g[R3])return;g=x._req=null,D0(x,j)}),g.on("response",(j)=>{let O=j.headers.location,B=j.statusCode;if(O&&N.followRedirects&&B>=300&&B<400){if(++x._redirects>N.maxRedirects){d(x,g,"Maximum redirects exceeded");return}g.abort();let q;try{q=new Rx(O,G)}catch(A){let T=SyntaxError(`Invalid URL: ${O}`);D0(x,T);return}M3(x,q,J,$)}else if(!x.emit("unexpected-response",g,j))d(x,g,`Unexpected server response: ${j.statusCode}`)}),g.on("upgrade",(j,O,B)=>{if(x.emit("upgrade",j),x.readyState!==U.CONNECTING)return;g=x._req=null;let q=j.headers.upgrade;if(q===void 0||q.toLowerCase()!=="websocket"){d(x,O,"Invalid Upgrade header");return}let A=T6("sha1").update(C+W6).digest("base64");if(j.headers["sec-websocket-accept"]!==A){d(x,O,"Invalid Sec-WebSocket-Accept header");return}let T=j.headers["sec-websocket-protocol"],_;if(T!==void 0){if(!H.size)_="Server sent a subprotocol but none was requested";else if(!H.has(T))_="Server sent an invalid subprotocol"}else if(H.size)_="Server sent no subprotocol";if(_){d(x,O,_);return}if(T)x._protocol=T;let F=j.headers["sec-websocket-extensions"];if(F!==void 0){if(!R){d(x,O,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let V;try{V=u6(F)}catch(E){d(x,O,"Invalid Sec-WebSocket-Extensions header");return}let M=Object.keys(V);if(M.length!==1||M[0]!==z1.extensionName){d(x,O,"Server indicated an extension that was not requested");return}try{R.accept(V[z1.extensionName])}catch(E){d(x,O,"Invalid Sec-WebSocket-Extensions header");return}x._extensions[z1.extensionName]=R}x.setSocket(O,B,{allowSynchronousEvents:N.allowSynchronousEvents,generateMask:N.generateMask,maxPayload:N.maxPayload,skipUTF8Validation:N.skipUTF8Validation})}),N.finishRequest)N.finishRequest(g,x);else g.end()}function D0(x,G){x._readyState=U.CLOSING,x._errorEmitted=!0,x.emit("error",G),x.emitClose()}function b6(x){return x.path=x.socketPath,V3.connect(x)}function l6(x){if(x.path=void 0,!x.servername&&x.servername!=="")x.servername=V3.isIP(x.host)?"":x.host;return A6.connect(x)}function d(x,G,J){x._readyState=U.CLOSING;let $=Error(J);if(Error.captureStackTrace($,d),G.setHeader){if(G[R3]=!0,G.abort(),G.socket&&!G.socket.destroyed)G.socket.destroy();process.nextTick(D0,x,$)}else G.destroy($),G.once("error",x.emit.bind(x,"error")),G.once("close",x.emitClose.bind(x))}function Bx(x,G,J){if(G){let $=F6(G)?G.size:w6(G).length;if(x._socket)x._sender._bufferedBytes+=$;else x._bufferedAmount+=$}if(J){let $=Error(`WebSocket is not open: readyState ${x.readyState} (${J1[x.readyState]})`);process.nextTick(J,$)}}function d6(x,G){let J=this[m];if(J._closeFrameReceived=!0,J._closeMessage=G,J._closeCode=x,J._socket[m]===void 0)return;if(J._socket.removeListener("data",T0),process.nextTick(q3,J._socket),x===1005)J.close();else J.close(x,G)}function k6(){let x=this[m];if(!x.isPaused)x._socket.resume()}function h6(x){let G=this[m];if(G._socket[m]!==void 0)G._socket.removeListener("data",T0),process.nextTick(q3,G._socket),G.close(x[v6]);if(!G._errorEmitted)G._errorEmitted=!0,G.emit("error",x)}function H3(){this[m].emitClose()}function n6(x,G){this[m].emit("message",x,G)}function i6(x){let G=this[m];if(G._autoPong)G.pong(x,!this._isServer,O3);G.emit("ping",x)}function c6(x){this[m].emit("pong",x)}function q3(x){x.resume()}function p6(x){let G=this[m];if(G.readyState===U.CLOSED)return;if(G.readyState===U.OPEN)G._readyState=U.CLOSING,B3(G);if(this._socket.end(),!G._errorEmitted)G._errorEmitted=!0,G.emit("error",x)}function B3(x){x._closeTimer=setTimeout(x._socket.destroy.bind(x._socket),x._closeTimeout)}function U3(){let x=this[m];if(this.removeListener("close",U3),this.removeListener("data",T0),this.removeListener("end",A3),x._readyState=U.CLOSING,!this._readableState.endEmitted&&!x._closeFrameReceived&&!x._receiver._writableState.errorEmitted&&this._readableState.length!==0){let G=this.read(this._readableState.length);x._receiver.write(G)}if(x._receiver.end(),this[m]=void 0,clearTimeout(x._closeTimer),x._receiver._writableState.finished||x._receiver._writableState.errorEmitted)x.emitClose();else x._receiver.on("error",H3),x._receiver.on("finish",H3)}function T0(x){if(!this[m]._receiver.write(x))this.pause()}function A3(){let x=this[m];x._readyState=U.CLOSING,x._receiver.end(),this.end()}function D3(){let x=this[m];if(this.removeListener("error",D3),this.on("error",O3),x)x._readyState=U.CLOSING,this.destroy()}});var P3=w((L8,F3)=>{var _8=_0(),{Duplex:o6}=y("stream");function _3(x){x.emit("close")}function s6(){if(!this.destroyed&&this._writableState.finished)this.destroy()}function L3(x){if(this.removeListener("error",L3),this.destroy(),this.listenerCount("error")===0)this.emit("error",x)}function r6(x,G){let J=!0,$=new o6({...G,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return x.on("message",function(Z,Q){let X=!Q&&$._readableState.objectMode?Z.toString():Z;if(!$.push(X))x.pause()}),x.once("error",function(Z){if($.destroyed)return;J=!1,$.destroy(Z)}),x.once("close",function(){if($.destroyed)return;$.push(null)}),$._destroy=function(N,Z){if(x.readyState===x.CLOSED){Z(N),process.nextTick(_3,$);return}let Q=!1;if(x.once("error",function(z){Q=!0,Z(z)}),x.once("close",function(){if(!Q)Z(N);process.nextTick(_3,$)}),J)x.terminate()},$._final=function(N){if(x.readyState===x.CONNECTING){x.once("open",function(){$._final(N)});return}if(x._socket===null)return;if(x._socket._writableState.finished){if(N(),$._readableState.endEmitted)$.destroy()}else x._socket.once("finish",function(){N()}),x.close()},$._read=function(){if(x.isPaused)x.resume()},$._write=function(N,Z,Q){if(x.readyState===x.CONNECTING){x.once("open",function(){$._write(N,Z,Q)});return}x.send(N,Q)},$.on("end",s6),$.on("error",L3),$}F3.exports=r6});var S3=w((F8,W3)=>{var{tokenChars:a6}=B1();function t6(x){let G=new Set,J=-1,$=-1,N=0;for(N;N<x.length;N++){let Q=x.charCodeAt(N);if($===-1&&a6[Q]===1){if(J===-1)J=N}else if(N!==0&&(Q===32||Q===9)){if($===-1&&J!==-1)$=N}else if(Q===44){if(J===-1)throw SyntaxError(`Unexpected character at index ${N}`);if($===-1)$=N;let X=x.slice(J,$);if(G.has(X))throw SyntaxError(`The "${X}" subprotocol is duplicated`);G.add(X),J=$=-1}else throw SyntaxError(`Unexpected character at index ${N}`)}if(J===-1||$!==-1)throw SyntaxError("Unexpected end of input");let Z=x.slice(J,N);if(G.has(Z))throw SyntaxError(`The "${Z}" subprotocol is duplicated`);return G.add(Z),G}W3.exports={parse:t6}});var u3=w((W8,m3)=>{var e6=y("events"),L0=y("http"),{Duplex:P8}=y("stream"),{createHash:x5}=y("crypto"),v3=Ox(),H1=l1(),G5=S3(),J5=_0(),{CLOSE_TIMEOUT:$5,GUID:N5,kWebSocket:Z5}=x1(),Q5=/^[+/0-9A-Za-z]{22}==$/;class E3 extends e6{constructor(x,G){super();if(x={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,closeTimeout:$5,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:J5,...x},x.port==null&&!x.server&&!x.noServer||x.port!=null&&(x.server||x.noServer)||x.server&&x.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(x.port!=null)this._server=L0.createServer((J,$)=>{let N=L0.STATUS_CODES[426];$.writeHead(426,{"Content-Length":N.length,"Content-Type":"text/plain"}),$.end(N)}),this._server.listen(x.port,x.host,x.backlog,G);else if(x.server)this._server=x.server;if(this._server){let J=this.emit.bind(this,"connection");this._removeListeners=X5(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:($,N,Z)=>{this.handleUpgrade($,N,Z,J)}})}if(x.perMessageDeflate===!0)x.perMessageDeflate={};if(x.clientTracking)this.clients=new Set,this._shouldEmitClose=!1;this.options=x,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');if(!this._server)return null;return this._server.address()}close(x){if(this._state===2){if(x)this.once("close",()=>{x(Error("The server is not running"))});process.nextTick(n1,this);return}if(x)this.once("close",x);if(this._state===1)return;if(this._state=1,this.options.noServer||this.options.server){if(this._server)this._removeListeners(),this._removeListeners=this._server=null;if(this.clients)if(!this.clients.size)process.nextTick(n1,this);else this._shouldEmitClose=!0;else process.nextTick(n1,this)}else{let G=this._server;this._removeListeners(),this._removeListeners=this._server=null,G.close(()=>{n1(this)})}}shouldHandle(x){if(this.options.path){let G=x.url.indexOf("?");if((G!==-1?x.url.slice(0,G):x.url)!==this.options.path)return!1}return!0}handleUpgrade(x,G,J,$){G.on("error",y3);let N=x.headers["sec-websocket-key"],Z=x.headers.upgrade,Q=+x.headers["sec-websocket-version"];if(x.method!=="GET"){V1(this,x,G,405,"Invalid HTTP method");return}if(Z===void 0||Z.toLowerCase()!=="websocket"){V1(this,x,G,400,"Invalid Upgrade header");return}if(N===void 0||!Q5.test(N)){V1(this,x,G,400,"Missing or invalid Sec-WebSocket-Key header");return}if(Q!==13&&Q!==8){V1(this,x,G,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});return}if(!this.shouldHandle(x)){i1(G,400);return}let X=x.headers["sec-websocket-protocol"],z=new Set;if(X!==void 0)try{z=G5.parse(X)}catch(K){V1(this,x,G,400,"Invalid Sec-WebSocket-Protocol header");return}let I=x.headers["sec-websocket-extensions"],C={};if(this.options.perMessageDeflate&&I!==void 0){let K=new H1(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let H=v3.parse(I);if(H[H1.extensionName])K.accept(H[H1.extensionName]),C[H1.extensionName]=K}catch(H){V1(this,x,G,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let K={origin:x.headers[`${Q===8?"sec-websocket-origin":"origin"}`],secure:!!(x.socket.authorized||x.socket.encrypted),req:x};if(this.options.verifyClient.length===2){this.options.verifyClient(K,(H,R,g,j)=>{if(!H)return i1(G,R||401,g,j);this.completeUpgrade(C,N,z,x,G,J,$)});return}if(!this.options.verifyClient(K))return i1(G,401)}this.completeUpgrade(C,N,z,x,G,J,$)}completeUpgrade(x,G,J,$,N,Z,Q){if(!N.readable||!N.writable)return N.destroy();if(N[Z5])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return i1(N,503);let z=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${x5("sha1").update(G+N5).digest("base64")}`],I=new this.options.WebSocket(null,void 0,this.options);if(J.size){let C=this.options.handleProtocols?this.options.handleProtocols(J,$):J.values().next().value;if(C)z.push(`Sec-WebSocket-Protocol: ${C}`),I._protocol=C}if(x[H1.extensionName]){let C=x[H1.extensionName].params,K=v3.format({[H1.extensionName]:[C]});z.push(`Sec-WebSocket-Extensions: ${K}`),I._extensions=x}if(this.emit("headers",z,$),N.write(z.concat(`\r
`).join(`\r
`)),N.removeListener("error",y3),I.setSocket(N,Z,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients)this.clients.add(I),I.on("close",()=>{if(this.clients.delete(I),this._shouldEmitClose&&!this.clients.size)process.nextTick(n1,this)});Q(I,$)}}m3.exports=E3;function X5(x,G){for(let J of Object.keys(G))x.on(J,G[J]);return function(){for(let $ of Object.keys(G))x.removeListener($,G[$])}}function n1(x){x._state=2,x.emit("close")}function y3(){this.destroy()}function i1(x,G,J,$){J=J||L0.STATUS_CODES[G],$={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(J),...$},x.once("finish",x.destroy),x.end(`HTTP/1.1 ${G} ${L0.STATUS_CODES[G]}\r
`+Object.keys($).map((N)=>`${N}: ${$[N]}`).join(`\r
`)+`\r
\r
`+J)}function V1(x,G,J,$,N,Z){if(x.listenerCount("wsClientError")){let Q=Error(N);Error.captureStackTrace(Q,V1),x.emit("wsClientError",Q,J,G)}else i1(J,$,N,Z)}});var J0=i(L1(),1),f=i(S0(),1);import{stdout as w0,stdin as ux}from"node:process";import*as $1 from"node:readline";import G4 from"node:readline";import{ReadStream as vx}from"node:tty";var J4=(x)=>x===161||x===164||x===167||x===168||x===170||x===173||x===174||x>=176&&x<=180||x>=182&&x<=186||x>=188&&x<=191||x===198||x===208||x===215||x===216||x>=222&&x<=225||x===230||x>=232&&x<=234||x===236||x===237||x===240||x===242||x===243||x>=247&&x<=250||x===252||x===254||x===257||x===273||x===275||x===283||x===294||x===295||x===299||x>=305&&x<=307||x===312||x>=319&&x<=322||x===324||x>=328&&x<=331||x===333||x===338||x===339||x===358||x===359||x===363||x===462||x===464||x===466||x===468||x===470||x===472||x===474||x===476||x===593||x===609||x===708||x===711||x>=713&&x<=715||x===717||x===720||x>=728&&x<=731||x===733||x===735||x>=768&&x<=879||x>=913&&x<=929||x>=931&&x<=937||x>=945&&x<=961||x>=963&&x<=969||x===1025||x>=1040&&x<=1103||x===1105||x===8208||x>=8211&&x<=8214||x===8216||x===8217||x===8220||x===8221||x>=8224&&x<=8226||x>=8228&&x<=8231||x===8240||x===8242||x===8243||x===8245||x===8251||x===8254||x===8308||x===8319||x>=8321&&x<=8324||x===8364||x===8451||x===8453||x===8457||x===8467||x===8470||x===8481||x===8482||x===8486||x===8491||x===8531||x===8532||x>=8539&&x<=8542||x>=8544&&x<=8555||x>=8560&&x<=8569||x===8585||x>=8592&&x<=8601||x===8632||x===8633||x===8658||x===8660||x===8679||x===8704||x===8706||x===8707||x===8711||x===8712||x===8715||x===8719||x===8721||x===8725||x===8730||x>=8733&&x<=8736||x===8739||x===8741||x>=8743&&x<=8748||x===8750||x>=8756&&x<=8759||x===8764||x===8765||x===8776||x===8780||x===8786||x===8800||x===8801||x>=8804&&x<=8807||x===8810||x===8811||x===8814||x===8815||x===8834||x===8835||x===8838||x===8839||x===8853||x===8857||x===8869||x===8895||x===8978||x>=9312&&x<=9449||x>=9451&&x<=9547||x>=9552&&x<=9587||x>=9600&&x<=9615||x>=9618&&x<=9621||x===9632||x===9633||x>=9635&&x<=9641||x===9650||x===9651||x===9654||x===9655||x===9660||x===9661||x===9664||x===9665||x>=9670&&x<=9672||x===9675||x>=9678&&x<=9681||x>=9698&&x<=9701||x===9711||x===9733||x===9734||x===9737||x===9742||x===9743||x===9756||x===9758||x===9792||x===9794||x===9824||x===9825||x>=9827&&x<=9829||x>=9831&&x<=9834||x===9836||x===9837||x===9839||x===9886||x===9887||x===9919||x>=9926&&x<=9933||x>=9935&&x<=9939||x>=9941&&x<=9953||x===9955||x===9960||x===9961||x>=9963&&x<=9969||x===9972||x>=9974&&x<=9977||x===9979||x===9980||x===9982||x===9983||x===10045||x>=10102&&x<=10111||x>=11094&&x<=11097||x>=12872&&x<=12879||x>=57344&&x<=63743||x>=65024&&x<=65039||x===65533||x>=127232&&x<=127242||x>=127248&&x<=127277||x>=127280&&x<=127337||x>=127344&&x<=127373||x===127375||x===127376||x>=127387&&x<=127404||x>=917760&&x<=917999||x>=983040&&x<=1048573||x>=1048576&&x<=1114109,$4=(x)=>x===12288||x>=65281&&x<=65376||x>=65504&&x<=65510,N4=(x)=>x>=4352&&x<=4447||x===8986||x===8987||x===9001||x===9002||x>=9193&&x<=9196||x===9200||x===9203||x===9725||x===9726||x===9748||x===9749||x>=9800&&x<=9811||x===9855||x===9875||x===9889||x===9898||x===9899||x===9917||x===9918||x===9924||x===9925||x===9934||x===9940||x===9962||x===9970||x===9971||x===9973||x===9978||x===9981||x===9989||x===9994||x===9995||x===10024||x===10060||x===10062||x>=10067&&x<=10069||x===10071||x>=10133&&x<=10135||x===10160||x===10175||x===11035||x===11036||x===11088||x===11093||x>=11904&&x<=11929||x>=11931&&x<=12019||x>=12032&&x<=12245||x>=12272&&x<=12287||x>=12289&&x<=12350||x>=12353&&x<=12438||x>=12441&&x<=12543||x>=12549&&x<=12591||x>=12593&&x<=12686||x>=12688&&x<=12771||x>=12783&&x<=12830||x>=12832&&x<=12871||x>=12880&&x<=19903||x>=19968&&x<=42124||x>=42128&&x<=42182||x>=43360&&x<=43388||x>=44032&&x<=55203||x>=63744&&x<=64255||x>=65040&&x<=65049||x>=65072&&x<=65106||x>=65108&&x<=65126||x>=65128&&x<=65131||x>=94176&&x<=94180||x===94192||x===94193||x>=94208&&x<=100343||x>=100352&&x<=101589||x>=101632&&x<=101640||x>=110576&&x<=110579||x>=110581&&x<=110587||x===110589||x===110590||x>=110592&&x<=110882||x===110898||x>=110928&&x<=110930||x===110933||x>=110948&&x<=110951||x>=110960&&x<=111355||x===126980||x===127183||x===127374||x>=127377&&x<=127386||x>=127488&&x<=127490||x>=127504&&x<=127547||x>=127552&&x<=127560||x===127568||x===127569||x>=127584&&x<=127589||x>=127744&&x<=127776||x>=127789&&x<=127797||x>=127799&&x<=127868||x>=127870&&x<=127891||x>=127904&&x<=127946||x>=127951&&x<=127955||x>=127968&&x<=127984||x===127988||x>=127992&&x<=128062||x===128064||x>=128066&&x<=128252||x>=128255&&x<=128317||x>=128331&&x<=128334||x>=128336&&x<=128359||x===128378||x===128405||x===128406||x===128420||x>=128507&&x<=128591||x>=128640&&x<=128709||x===128716||x>=128720&&x<=128722||x>=128725&&x<=128727||x>=128732&&x<=128735||x===128747||x===128748||x>=128756&&x<=128764||x>=128992&&x<=129003||x===129008||x>=129292&&x<=129338||x>=129340&&x<=129349||x>=129351&&x<=129535||x>=129648&&x<=129660||x>=129664&&x<=129672||x>=129680&&x<=129725||x>=129727&&x<=129733||x>=129742&&x<=129755||x>=129760&&x<=129768||x>=129776&&x<=129784||x>=131072&&x<=196605||x>=196608&&x<=262141,v0=/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/y,t1=/[\x00-\x08\x0A-\x1F\x7F-\x9F]{1,1000}/y,e1=/\t{1,1000}/y,y0=/[\u{1F1E6}-\u{1F1FF}]{2}|\u{1F3F4}[\u{E0061}-\u{E007A}]{2}[\u{E0030}-\u{E0039}\u{E0061}-\u{E007A}]{1,3}\u{E007F}|(?:\p{Emoji}\uFE0F\u20E3?|\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation})(?:\u200D(?:\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation}|\p{Emoji}\uFE0F\u20E3?))*/yu,x0=/(?:[\x20-\x7E\xA0-\xFF](?!\uFE0F)){1,1000}/y,Z4=/\p{M}+/gu,Q4={limit:1/0,ellipsis:""},wx=(x,G={},J={})=>{let $=G.limit??1/0,N=G.ellipsis??"",Z=G?.ellipsisWidth??(N?wx(N,Q4,J).width:0),Q=J.ansiWidth??0,X=J.controlWidth??0,z=J.tabWidth??8,I=J.ambiguousWidth??1,C=J.emojiWidth??2,K=J.fullWidthWidth??2,H=J.regularWidth??1,R=J.wideWidth??2,g=0,j=0,O=x.length,B=0,q=!1,A=O,T=Math.max(0,$-Z),_=0,F=0,V=0,M=0;x:for(;;){if(F>_||j>=O&&j>g){let E=x.slice(_,F)||x.slice(g,j);B=0;for(let u of E.replaceAll(Z4,"")){let b=u.codePointAt(0)||0;if($4(b)?M=K:N4(b)?M=R:I!==H&&J4(b)?M=I:M=H,V+M>T&&(A=Math.min(A,Math.max(_,g)+B)),V+M>$){q=!0;break x}B+=u.length,V+=M}_=F=0}if(j>=O)break;if(x0.lastIndex=j,x0.test(x)){if(B=x0.lastIndex-j,M=B*H,V+M>T&&(A=Math.min(A,j+Math.floor((T-V)/H))),V+M>$){q=!0;break}V+=M,_=g,F=j,j=g=x0.lastIndex;continue}if(v0.lastIndex=j,v0.test(x)){if(V+Q>T&&(A=Math.min(A,j)),V+Q>$){q=!0;break}V+=Q,_=g,F=j,j=g=v0.lastIndex;continue}if(t1.lastIndex=j,t1.test(x)){if(B=t1.lastIndex-j,M=B*X,V+M>T&&(A=Math.min(A,j+Math.floor((T-V)/X))),V+M>$){q=!0;break}V+=M,_=g,F=j,j=g=t1.lastIndex;continue}if(e1.lastIndex=j,e1.test(x)){if(B=e1.lastIndex-j,M=B*z,V+M>T&&(A=Math.min(A,j+Math.floor((T-V)/z))),V+M>$){q=!0;break}V+=M,_=g,F=j,j=g=e1.lastIndex;continue}if(y0.lastIndex=j,y0.test(x)){if(V+C>T&&(A=Math.min(A,j)),V+C>$){q=!0;break}V+=C,_=g,F=j,j=g=y0.lastIndex;continue}j+=1}return{width:q?T:V,index:q?A:O,truncated:q,ellipsed:q&&$>=Z}},X4={limit:1/0,ellipsis:"",ellipsisWidth:0},F1=(x,G={})=>wx(x,X4,G).width,$0="\x1B",fx="",z4=39,f0="\x07",bx="[",I4="]",lx="m",b0=`${I4}8;;`,yx=new RegExp(`(?:\\${bx}(?<code>\\d+)m|\\${b0}(?<uri>.*)${f0})`,"y"),K4=(x)=>{if(x>=30&&x<=37||x>=90&&x<=97)return 39;if(x>=40&&x<=47||x>=100&&x<=107)return 49;if(x===1||x===2)return 22;if(x===3)return 23;if(x===4)return 24;if(x===7)return 27;if(x===8)return 28;if(x===9)return 29;if(x===0)return 0},Ex=(x)=>`${$0}${bx}${x}${lx}`,mx=(x)=>`${$0}${b0}${x}${f0}`,j4=(x)=>x.map((G)=>F1(G)),E0=(x,G,J)=>{let $=G[Symbol.iterator](),N=!1,Z=!1,Q=x.at(-1),X=Q===void 0?0:F1(Q),z=$.next(),I=$.next(),C=0;for(;!z.done;){let K=z.value,H=F1(K);X+H<=J?x[x.length-1]+=K:(x.push(K),X=0),(K===$0||K===fx)&&(N=!0,Z=G.startsWith(b0,C+1)),N?Z?K===f0&&(N=!1,Z=!1):K===lx&&(N=!1):(X+=H,X===J&&!I.done&&(x.push(""),X=0)),z=I,I=$.next(),C+=K.length}Q=x.at(-1),!X&&Q!==void 0&&Q.length>0&&x.length>1&&(x[x.length-2]+=x.pop())},g4=(x)=>{let G=x.split(" "),J=G.length;for(;J>0&&!(F1(G[J-1])>0);)J--;return J===G.length?x:G.slice(0,J).join(" ")+G.slice(J).join("")},C4=(x,G,J={})=>{if(J.trim!==!1&&x.trim()==="")return"";let $="",N,Z,Q=x.split(" "),X=j4(Q),z=[""];for(let[g,j]of Q.entries()){J.trim!==!1&&(z[z.length-1]=(z.at(-1)??"").trimStart());let O=F1(z.at(-1)??"");if(g!==0&&(O>=G&&(J.wordWrap===!1||J.trim===!1)&&(z.push(""),O=0),(O>0||J.trim===!1)&&(z[z.length-1]+=" ",O++)),J.hard&&X[g]>G){let B=G-O,q=1+Math.floor((X[g]-B-1)/G);Math.floor((X[g]-1)/G)<q&&z.push(""),E0(z,j,G);continue}if(O+X[g]>G&&O>0&&X[g]>0){if(J.wordWrap===!1&&O<G){E0(z,j,G);continue}z.push("")}if(O+X[g]>G&&J.wordWrap===!1){E0(z,j,G);continue}z[z.length-1]+=j}J.trim!==!1&&(z=z.map((g)=>g4(g)));let I=z.join(`
`),C=I[Symbol.iterator](),K=C.next(),H=C.next(),R=0;for(;!K.done;){let g=K.value,j=H.value;if($+=g,g===$0||g===fx){yx.lastIndex=R+1;let B=yx.exec(I)?.groups;if(B?.code!==void 0){let q=Number.parseFloat(B.code);N=q===z4?void 0:q}else B?.uri!==void 0&&(Z=B.uri.length===0?void 0:B.uri)}let O=N?K4(N):void 0;j===`
`?(Z&&($+=mx("")),N&&O&&($+=Ex(O))):g===`
`&&(N&&O&&($+=Ex(N)),Z&&($+=mx(Z))),R+=g.length,K=H,H=C.next()}return $};function m0(x,G,J){return String(x).normalize().replaceAll(`\r
`,`
`).split(`
`).map(($)=>C4($,G,J)).join(`
`)}var Y4=["up","down","left","right","space","enter","cancel"],s={actions:new Set(Y4),aliases:new Map([["k","up"],["j","down"],["h","left"],["l","right"],["\x03","cancel"],["escape","cancel"]]),messages:{cancel:"Canceled",error:"Something went wrong"},withGuide:!0};function l0(x,G){if(typeof x=="string")return s.aliases.get(x)===G;for(let J of x)if(J!==void 0&&l0(J,G))return!0;return!1}function H4(x,G){if(x===G)return;let J=x.split(`
`),$=G.split(`
`),N=Math.max(J.length,$.length),Z=[];for(let Q=0;Q<N;Q++)J[Q]!==$[Q]&&Z.push(Q);return{lines:Z,numLinesBefore:J.length,numLinesAfter:$.length,numLines:N}}var V4=globalThis.process.platform.startsWith("win"),u0=Symbol("clack:cancel");function P1(x){return x===u0}function G0(x,G){let J=x;J.isTTY&&J.setRawMode(G)}function dx({input:x=ux,output:G=w0,overwrite:J=!0,hideCursor:$=!0}={}){let N=$1.createInterface({input:x,output:G,prompt:"",tabSize:1});$1.emitKeypressEvents(x,N),x instanceof vx&&x.isTTY&&x.setRawMode(!0);let Z=(Q,{name:X,sequence:z})=>{let I=String(Q);if(l0([I,X,z],"cancel")){$&&G.write(f.cursor.show),process.exit(0);return}if(!J)return;$1.moveCursor(G,X==="return"?0:-1,X==="return"?-1:0,()=>{$1.clearLine(G,1,()=>{x.once("keypress",Z)})})};return $&&G.write(f.cursor.hide),x.once("keypress",Z),()=>{x.off("keypress",Z),$&&G.write(f.cursor.show),x instanceof vx&&x.isTTY&&!V4&&x.setRawMode(!1),N.terminal=!1,N.close()}}var W1=(x)=>("columns"in x)&&typeof x.columns=="number"?x.columns:80,d0=(x)=>("rows"in x)&&typeof x.rows=="number"?x.rows:20;function j1(x,G,J,$=J){let N=W1(x??w0);return m0(G,N-J.length,{hard:!0,trim:!1}).split(`
`).map((Z,Q)=>`${Q===0?$:J}${Z}`).join(`
`)}class S1{input;output;_abortSignal;rl;opts;_render;_track=!1;_prevFrame="";_subscribers=new Map;_cursor=0;state="initial";error="";value;userInput="";constructor(x,G=!0){let{input:J=ux,output:$=w0,render:N,signal:Z,...Q}=x;this.opts=Q,this.onKeypress=this.onKeypress.bind(this),this.close=this.close.bind(this),this.render=this.render.bind(this),this._render=N.bind(this),this._track=G,this._abortSignal=Z,this.input=J,this.output=$}unsubscribe(){this._subscribers.clear()}setSubscriber(x,G){let J=this._subscribers.get(x)??[];J.push(G),this._subscribers.set(x,J)}on(x,G){this.setSubscriber(x,{cb:G})}once(x,G){this.setSubscriber(x,{cb:G,once:!0})}emit(x,...G){let J=this._subscribers.get(x)??[],$=[];for(let N of J)N.cb(...G),N.once&&$.push(()=>J.splice(J.indexOf(N),1));for(let N of $)N()}prompt(){return new Promise((x)=>{if(this._abortSignal){if(this._abortSignal.aborted)return this.state="cancel",this.close(),x(u0);this._abortSignal.addEventListener("abort",()=>{this.state="cancel",this.close()},{once:!0})}this.rl=G4.createInterface({input:this.input,tabSize:2,prompt:"",escapeCodeTimeout:50,terminal:!0}),this.rl.prompt(),this.opts.initialUserInput!==void 0&&this._setUserInput(this.opts.initialUserInput,!0),this.input.on("keypress",this.onKeypress),G0(this.input,!0),this.output.on("resize",this.render),this.render(),this.once("submit",()=>{this.output.write(f.cursor.show),this.output.off("resize",this.render),G0(this.input,!1),x(this.value)}),this.once("cancel",()=>{this.output.write(f.cursor.show),this.output.off("resize",this.render),G0(this.input,!1),x(u0)})})}_isActionKey(x,G){return x==="\t"}_setValue(x){this.value=x,this.emit("value",this.value)}_setUserInput(x,G){this.userInput=x??"",this.emit("userInput",this.userInput),G&&this._track&&this.rl&&(this.rl.write(this.userInput),this._cursor=this.rl.cursor)}_clearUserInput(){this.rl?.write(null,{ctrl:!0,name:"u"}),this._setUserInput("")}onKeypress(x,G){if(this._track&&G.name!=="return"&&(G.name&&this._isActionKey(x,G)&&this.rl?.write(null,{ctrl:!0,name:"h"}),this._cursor=this.rl?.cursor??0,this._setUserInput(this.rl?.line)),this.state==="error"&&(this.state="active"),G?.name&&(!this._track&&s.aliases.has(G.name)&&this.emit("cursor",s.aliases.get(G.name)),s.actions.has(G.name)&&this.emit("cursor",G.name)),x&&(x.toLowerCase()==="y"||x.toLowerCase()==="n")&&this.emit("confirm",x.toLowerCase()==="y"),this.emit("key",x?.toLowerCase(),G),G?.name==="return"){if(this.opts.validate){let J=this.opts.validate(this.value);J&&(this.error=J instanceof Error?J.message:J,this.state="error",this.rl?.write(this.userInput))}this.state!=="error"&&(this.state="submit")}l0([x,G?.name,G?.sequence],"cancel")&&(this.state="cancel"),(this.state==="submit"||this.state==="cancel")&&this.emit("finalize"),this.render(),(this.state==="submit"||this.state==="cancel")&&this.close()}close(){this.input.unpipe(),this.input.removeListener("keypress",this.onKeypress),this.output.write(`
`),G0(this.input,!1),this.rl?.close(),this.rl=void 0,this.emit(`${this.state}`,this.value),this.unsubscribe()}restoreCursor(){let x=m0(this._prevFrame,process.stdout.columns,{hard:!0,trim:!1}).split(`
`).length-1;this.output.write(f.cursor.move(-999,x*-1))}render(){let x=m0(this._render(this)??"",process.stdout.columns,{hard:!0,trim:!1});if(x!==this._prevFrame){if(this.state==="initial")this.output.write(f.cursor.hide);else{let G=H4(this._prevFrame,x),J=d0(this.output);if(this.restoreCursor(),G){let $=Math.max(0,G.numLinesAfter-J),N=Math.max(0,G.numLinesBefore-J),Z=G.lines.find((Q)=>Q>=$);if(Z===void 0){this._prevFrame=x;return}if(G.lines.length===1){this.output.write(f.cursor.move(0,Z-N)),this.output.write(f.erase.lines(1));let Q=x.split(`
`);this.output.write(Q[Z]),this._prevFrame=x,this.output.write(f.cursor.move(0,Q.length-Z-1));return}else if(G.lines.length>1){if($<N)Z=$;else{let X=Z-N;X>0&&this.output.write(f.cursor.move(0,X))}this.output.write(f.erase.down());let Q=x.split(`
`).slice(Z);this.output.write(Q.join(`
`)),this._prevFrame=x;return}}this.output.write(f.erase.down())}this.output.write(x),this.state==="initial"&&(this.state="active"),this._prevFrame=x}}}function O4(x,G){if(x===void 0||G.length===0)return 0;let J=G.findIndex(($)=>$.value===x);return J!==-1?J:0}function R4(x,G){return(G.label??String(G.value)).toLowerCase().includes(x.toLowerCase())}function M4(x,G){if(G)return x?G:G[0]}class kx extends S1{filteredOptions;multiple;isNavigating=!1;selectedValues=[];focusedValue;#x=0;#J="";#$;#G;get cursor(){return this.#x}get userInputWithCursor(){if(!this.userInput)return J0.default.inverse(J0.default.hidden("_"));if(this._cursor>=this.userInput.length)return`${this.userInput}`;let x=this.userInput.slice(0,this._cursor),[G,...J]=this.userInput.slice(this._cursor);return`${x}${J0.default.inverse(G)}${J.join("")}`}get options(){return typeof this.#G=="function"?this.#G():this.#G}constructor(x){super(x),this.#G=x.options;let G=this.options;this.filteredOptions=[...G],this.multiple=x.multiple===!0,this.#$=x.filter??R4;let J;if(x.initialValue&&Array.isArray(x.initialValue)?this.multiple?J=x.initialValue:J=x.initialValue.slice(0,1):!this.multiple&&this.options.length>0&&(J=[this.options[0].value]),J)for(let $ of J){let N=G.findIndex((Z)=>Z.value===$);N!==-1&&(this.toggleSelected($),this.#x=N)}this.focusedValue=this.options[this.#x]?.value,this.on("key",($,N)=>this.#N($,N)),this.on("userInput",($)=>this.#Z($))}_isActionKey(x,G){return x==="\t"||this.multiple&&this.isNavigating&&G.name==="space"&&x!==void 0&&x!==""}#N(x,G){let J=G.name==="up",$=G.name==="down",N=G.name==="return";J||$?(this.#x=Math.max(0,Math.min(this.#x+(J?-1:1),this.filteredOptions.length-1)),this.focusedValue=this.filteredOptions[this.#x]?.value,this.multiple||(this.selectedValues=[this.focusedValue]),this.isNavigating=!0):N?this.value=M4(this.multiple,this.selectedValues):this.multiple?this.focusedValue!==void 0&&(G.name==="tab"||this.isNavigating&&G.name==="space")?this.toggleSelected(this.focusedValue):this.isNavigating=!1:(this.focusedValue&&(this.selectedValues=[this.focusedValue]),this.isNavigating=!1)}deselectAll(){this.selectedValues=[]}toggleSelected(x){this.filteredOptions.length!==0&&(this.multiple?this.selectedValues.includes(x)?this.selectedValues=this.selectedValues.filter((G)=>G!==x):this.selectedValues=[...this.selectedValues,x]:this.selectedValues=[x])}#Z(x){if(x!==this.#J){this.#J=x;let G=this.options;x?this.filteredOptions=G.filter((J)=>this.#$(x,J)):this.filteredOptions=[...G],this.#x=O4(this.focusedValue,this.filteredOptions),this.focusedValue=this.filteredOptions[this.#x]?.value,this.multiple||(this.focusedValue!==void 0?this.toggleSelected(this.focusedValue):this.deselectAll())}}}class hx extends S1{options;cursor=0;#x;getGroupItems(x){return this.options.filter((G)=>G.group===x)}isGroupSelected(x){let G=this.getGroupItems(x),J=this.value;return J===void 0?!1:G.every(($)=>J.includes($.value))}toggleValue(){let x=this.options[this.cursor];if(this.value===void 0&&(this.value=[]),x.group===!0){let G=x.value,J=this.getGroupItems(G);this.isGroupSelected(G)?this.value=this.value.filter(($)=>J.findIndex((N)=>N.value===$)===-1):this.value=[...this.value,...J.map(($)=>$.value)],this.value=Array.from(new Set(this.value))}else{let G=this.value.includes(x.value);this.value=G?this.value.filter((J)=>J!==x.value):[...this.value,x.value]}}constructor(x){super(x,!1);let{options:G}=x;this.#x=x.selectableGroups!==!1,this.options=Object.entries(G).flatMap(([J,$])=>[{value:J,group:!0,label:J},...$.map((N)=>({...N,group:J}))]),this.value=[...x.initialValues??[]],this.cursor=Math.max(this.options.findIndex(({value:J})=>J===x.cursorAt),this.#x?0:1),this.on("cursor",(J)=>{switch(J){case"left":case"up":{this.cursor=this.cursor===0?this.options.length-1:this.cursor-1;let $=this.options[this.cursor]?.group===!0;!this.#x&&$&&(this.cursor=this.cursor===0?this.options.length-1:this.cursor-1);break}case"down":case"right":{this.cursor=this.cursor===this.options.length-1?0:this.cursor+1;let $=this.options[this.cursor]?.group===!0;!this.#x&&$&&(this.cursor=this.cursor===this.options.length-1?0:this.cursor+1);break}case"space":this.toggleValue();break}})}}function K1(x,G,J){let $=x+G,N=Math.max(J.length-1,0),Z=$<0?N:$>N?0:$;return J[Z].disabled?K1(Z,G<0?-1:1,J):Z}class k0 extends S1{options;cursor=0;get _value(){return this.options[this.cursor].value}get _enabledOptions(){return this.options.filter((x)=>x.disabled!==!0)}toggleAll(){let x=this._enabledOptions,G=this.value!==void 0&&this.value.length===x.length;this.value=G?[]:x.map((J)=>J.value)}toggleInvert(){let x=this.value;if(!x)return;let G=this._enabledOptions.filter((J)=>!x.includes(J.value));this.value=G.map((J)=>J.value)}toggleValue(){this.value===void 0&&(this.value=[]);let x=this.value.includes(this._value);this.value=x?this.value.filter((G)=>G!==this._value):[...this.value,this._value]}constructor(x){super(x,!1),this.options=x.options,this.value=[...x.initialValues??[]];let G=Math.max(this.options.findIndex(({value:J})=>J===x.cursorAt),0);this.cursor=this.options[G].disabled?K1(G,1,this.options):G,this.on("key",(J)=>{J==="a"&&this.toggleAll(),J==="i"&&this.toggleInvert()}),this.on("cursor",(J)=>{switch(J){case"left":case"up":this.cursor=K1(this.cursor,-1,this.options);break;case"down":case"right":this.cursor=K1(this.cursor,1,this.options);break;case"space":this.toggleValue();break}})}}class h0 extends S1{options;cursor=0;get _selectedValue(){return this.options[this.cursor]}changeValue(){this.value=this._selectedValue.value}constructor(x){super(x,!1),this.options=x.options;let G=this.options.findIndex(({value:$})=>$===x.initialValue),J=G===-1?0:G;this.cursor=this.options[J].disabled?K1(J,1,this.options):J,this.changeValue(),this.on("cursor",($)=>{switch($){case"left":case"up":this.cursor=K1(this.cursor,-1,this.options);break;case"down":case"right":this.cursor=K1(this.cursor,1,this.options);break}this.changeValue()})}}var Y=i(L1(),1);import h from"node:process";var y1=i(S0(),1);function q4(){return h.platform!=="win32"?h.env.TERM!=="linux":!!h.env.CI||!!h.env.WT_SESSION||!!h.env.TERMINUS_SUBLIME||h.env.ConEmuTask==="{cmd::Cmder}"||h.env.TERM_PROGRAM==="Terminus-Sublime"||h.env.TERM_PROGRAM==="vscode"||h.env.TERM==="xterm-256color"||h.env.TERM==="alacritty"||h.env.TERMINAL_EMULATOR==="JetBrains-JediTerm"}var p0=q4(),B4=()=>process.env.CI==="true";var L=(x,G)=>p0?x:G,U4=L("","*"),ax=L("","x"),tx=L("","x"),z0=L("","o"),A4=L("","T"),S=L("","|"),E1=L("",""),i5=L("","T"),c5=L("",""),D4=L("",">"),nx=L(""," "),T4=L("","[]"),ix=L("","[+]"),cx=L("","[ ]"),p5=L("",""),px=L("","-"),_4=L("","+"),L4=L("","+"),F4=L("","+"),P4=L("","+"),o5=L("","+"),W4=L("",""),S4=L("","*"),v4=L("","!"),y4=L("","x"),ex=(x)=>{switch(x){case"initial":case"active":return Y.default.cyan(U4);case"cancel":return Y.default.red(ax);case"error":return Y.default.yellow(tx);case"submit":return Y.default.green(z0)}},x2=(x)=>{switch(x){case"initial":case"active":return Y.default.cyan(S);case"cancel":return Y.default.red(S);case"error":return Y.default.yellow(S);case"submit":return Y.default.green(S)}},E4=(x)=>x===161||x===164||x===167||x===168||x===170||x===173||x===174||x>=176&&x<=180||x>=182&&x<=186||x>=188&&x<=191||x===198||x===208||x===215||x===216||x>=222&&x<=225||x===230||x>=232&&x<=234||x===236||x===237||x===240||x===242||x===243||x>=247&&x<=250||x===252||x===254||x===257||x===273||x===275||x===283||x===294||x===295||x===299||x>=305&&x<=307||x===312||x>=319&&x<=322||x===324||x>=328&&x<=331||x===333||x===338||x===339||x===358||x===359||x===363||x===462||x===464||x===466||x===468||x===470||x===472||x===474||x===476||x===593||x===609||x===708||x===711||x>=713&&x<=715||x===717||x===720||x>=728&&x<=731||x===733||x===735||x>=768&&x<=879||x>=913&&x<=929||x>=931&&x<=937||x>=945&&x<=961||x>=963&&x<=969||x===1025||x>=1040&&x<=1103||x===1105||x===8208||x>=8211&&x<=8214||x===8216||x===8217||x===8220||x===8221||x>=8224&&x<=8226||x>=8228&&x<=8231||x===8240||x===8242||x===8243||x===8245||x===8251||x===8254||x===8308||x===8319||x>=8321&&x<=8324||x===8364||x===8451||x===8453||x===8457||x===8467||x===8470||x===8481||x===8482||x===8486||x===8491||x===8531||x===8532||x>=8539&&x<=8542||x>=8544&&x<=8555||x>=8560&&x<=8569||x===8585||x>=8592&&x<=8601||x===8632||x===8633||x===8658||x===8660||x===8679||x===8704||x===8706||x===8707||x===8711||x===8712||x===8715||x===8719||x===8721||x===8725||x===8730||x>=8733&&x<=8736||x===8739||x===8741||x>=8743&&x<=8748||x===8750||x>=8756&&x<=8759||x===8764||x===8765||x===8776||x===8780||x===8786||x===8800||x===8801||x>=8804&&x<=8807||x===8810||x===8811||x===8814||x===8815||x===8834||x===8835||x===8838||x===8839||x===8853||x===8857||x===8869||x===8895||x===8978||x>=9312&&x<=9449||x>=9451&&x<=9547||x>=9552&&x<=9587||x>=9600&&x<=9615||x>=9618&&x<=9621||x===9632||x===9633||x>=9635&&x<=9641||x===9650||x===9651||x===9654||x===9655||x===9660||x===9661||x===9664||x===9665||x>=9670&&x<=9672||x===9675||x>=9678&&x<=9681||x>=9698&&x<=9701||x===9711||x===9733||x===9734||x===9737||x===9742||x===9743||x===9756||x===9758||x===9792||x===9794||x===9824||x===9825||x>=9827&&x<=9829||x>=9831&&x<=9834||x===9836||x===9837||x===9839||x===9886||x===9887||x===9919||x>=9926&&x<=9933||x>=9935&&x<=9939||x>=9941&&x<=9953||x===9955||x===9960||x===9961||x>=9963&&x<=9969||x===9972||x>=9974&&x<=9977||x===9979||x===9980||x===9982||x===9983||x===10045||x>=10102&&x<=10111||x>=11094&&x<=11097||x>=12872&&x<=12879||x>=57344&&x<=63743||x>=65024&&x<=65039||x===65533||x>=127232&&x<=127242||x>=127248&&x<=127277||x>=127280&&x<=127337||x>=127344&&x<=127373||x===127375||x===127376||x>=127387&&x<=127404||x>=917760&&x<=917999||x>=983040&&x<=1048573||x>=1048576&&x<=1114109,m4=(x)=>x===12288||x>=65281&&x<=65376||x>=65504&&x<=65510,u4=(x)=>x>=4352&&x<=4447||x===8986||x===8987||x===9001||x===9002||x>=9193&&x<=9196||x===9200||x===9203||x===9725||x===9726||x===9748||x===9749||x>=9800&&x<=9811||x===9855||x===9875||x===9889||x===9898||x===9899||x===9917||x===9918||x===9924||x===9925||x===9934||x===9940||x===9962||x===9970||x===9971||x===9973||x===9978||x===9981||x===9989||x===9994||x===9995||x===10024||x===10060||x===10062||x>=10067&&x<=10069||x===10071||x>=10133&&x<=10135||x===10160||x===10175||x===11035||x===11036||x===11088||x===11093||x>=11904&&x<=11929||x>=11931&&x<=12019||x>=12032&&x<=12245||x>=12272&&x<=12287||x>=12289&&x<=12350||x>=12353&&x<=12438||x>=12441&&x<=12543||x>=12549&&x<=12591||x>=12593&&x<=12686||x>=12688&&x<=12771||x>=12783&&x<=12830||x>=12832&&x<=12871||x>=12880&&x<=19903||x>=19968&&x<=42124||x>=42128&&x<=42182||x>=43360&&x<=43388||x>=44032&&x<=55203||x>=63744&&x<=64255||x>=65040&&x<=65049||x>=65072&&x<=65106||x>=65108&&x<=65126||x>=65128&&x<=65131||x>=94176&&x<=94180||x===94192||x===94193||x>=94208&&x<=100343||x>=100352&&x<=101589||x>=101632&&x<=101640||x>=110576&&x<=110579||x>=110581&&x<=110587||x===110589||x===110590||x>=110592&&x<=110882||x===110898||x>=110928&&x<=110930||x===110933||x>=110948&&x<=110951||x>=110960&&x<=111355||x===126980||x===127183||x===127374||x>=127377&&x<=127386||x>=127488&&x<=127490||x>=127504&&x<=127547||x>=127552&&x<=127560||x===127568||x===127569||x>=127584&&x<=127589||x>=127744&&x<=127776||x>=127789&&x<=127797||x>=127799&&x<=127868||x>=127870&&x<=127891||x>=127904&&x<=127946||x>=127951&&x<=127955||x>=127968&&x<=127984||x===127988||x>=127992&&x<=128062||x===128064||x>=128066&&x<=128252||x>=128255&&x<=128317||x>=128331&&x<=128334||x>=128336&&x<=128359||x===128378||x===128405||x===128406||x===128420||x>=128507&&x<=128591||x>=128640&&x<=128709||x===128716||x>=128720&&x<=128722||x>=128725&&x<=128727||x>=128732&&x<=128735||x===128747||x===128748||x>=128756&&x<=128764||x>=128992&&x<=129003||x===129008||x>=129292&&x<=129338||x>=129340&&x<=129349||x>=129351&&x<=129535||x>=129648&&x<=129660||x>=129664&&x<=129672||x>=129680&&x<=129725||x>=129727&&x<=129733||x>=129742&&x<=129755||x>=129760&&x<=129768||x>=129776&&x<=129784||x>=131072&&x<=196605||x>=196608&&x<=262141,n0=/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/y,N0=/[\x00-\x08\x0A-\x1F\x7F-\x9F]{1,1000}/y,Z0=/\t{1,1000}/y,i0=/[\u{1F1E6}-\u{1F1FF}]{2}|\u{1F3F4}[\u{E0061}-\u{E007A}]{2}[\u{E0030}-\u{E0039}\u{E0061}-\u{E007A}]{1,3}\u{E007F}|(?:\p{Emoji}\uFE0F\u20E3?|\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation})(?:\u200D(?:\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation}|\p{Emoji}\uFE0F\u20E3?))*/yu,Q0=/(?:[\x20-\x7E\xA0-\xFF](?!\uFE0F)){1,1000}/y,w4=/\p{M}+/gu,f4={limit:1/0,ellipsis:""},G2=(x,G={},J={})=>{let $=G.limit??1/0,N=G.ellipsis??"",Z=G?.ellipsisWidth??(N?G2(N,f4,J).width:0),Q=J.ansiWidth??0,X=J.controlWidth??0,z=J.tabWidth??8,I=J.ambiguousWidth??1,C=J.emojiWidth??2,K=J.fullWidthWidth??2,H=J.regularWidth??1,R=J.wideWidth??2,g=0,j=0,O=x.length,B=0,q=!1,A=O,T=Math.max(0,$-Z),_=0,F=0,V=0,M=0;x:for(;;){if(F>_||j>=O&&j>g){let E=x.slice(_,F)||x.slice(g,j);B=0;for(let u of E.replaceAll(w4,"")){let b=u.codePointAt(0)||0;if(m4(b)?M=K:u4(b)?M=R:I!==H&&E4(b)?M=I:M=H,V+M>T&&(A=Math.min(A,Math.max(_,g)+B)),V+M>$){q=!0;break x}B+=u.length,V+=M}_=F=0}if(j>=O)break;if(Q0.lastIndex=j,Q0.test(x)){if(B=Q0.lastIndex-j,M=B*H,V+M>T&&(A=Math.min(A,j+Math.floor((T-V)/H))),V+M>$){q=!0;break}V+=M,_=g,F=j,j=g=Q0.lastIndex;continue}if(n0.lastIndex=j,n0.test(x)){if(V+Q>T&&(A=Math.min(A,j)),V+Q>$){q=!0;break}V+=Q,_=g,F=j,j=g=n0.lastIndex;continue}if(N0.lastIndex=j,N0.test(x)){if(B=N0.lastIndex-j,M=B*X,V+M>T&&(A=Math.min(A,j+Math.floor((T-V)/X))),V+M>$){q=!0;break}V+=M,_=g,F=j,j=g=N0.lastIndex;continue}if(Z0.lastIndex=j,Z0.test(x)){if(B=Z0.lastIndex-j,M=B*z,V+M>T&&(A=Math.min(A,j+Math.floor((T-V)/z))),V+M>$){q=!0;break}V+=M,_=g,F=j,j=g=Z0.lastIndex;continue}if(i0.lastIndex=j,i0.test(x)){if(V+C>T&&(A=Math.min(A,j)),V+C>$){q=!0;break}V+=C,_=g,F=j,j=g=i0.lastIndex;continue}j+=1}return{width:q?T:V,index:q?A:O,truncated:q,ellipsed:q&&$>=Z}},b4={limit:1/0,ellipsis:"",ellipsisWidth:0},r=(x,G={})=>G2(x,b4,G).width,I0="\x1B",J2="",l4=39,s0="\x07",$2="[",d4="]",N2="m",r0=`${d4}8;;`,ox=new RegExp(`(?:\\${$2}(?<code>\\d+)m|\\${r0}(?<uri>.*)${s0})`,"y"),k4=(x)=>{if(x>=30&&x<=37||x>=90&&x<=97)return 39;if(x>=40&&x<=47||x>=100&&x<=107)return 49;if(x===1||x===2)return 22;if(x===3)return 23;if(x===4)return 24;if(x===7)return 27;if(x===8)return 28;if(x===9)return 29;if(x===0)return 0},sx=(x)=>`${I0}${$2}${x}${N2}`,rx=(x)=>`${I0}${r0}${x}${s0}`,h4=(x)=>x.map((G)=>r(G)),c0=(x,G,J)=>{let $=G[Symbol.iterator](),N=!1,Z=!1,Q=x.at(-1),X=Q===void 0?0:r(Q),z=$.next(),I=$.next(),C=0;for(;!z.done;){let K=z.value,H=r(K);X+H<=J?x[x.length-1]+=K:(x.push(K),X=0),(K===I0||K===J2)&&(N=!0,Z=G.startsWith(r0,C+1)),N?Z?K===s0&&(N=!1,Z=!1):K===N2&&(N=!1):(X+=H,X===J&&!I.done&&(x.push(""),X=0)),z=I,I=$.next(),C+=K.length}Q=x.at(-1),!X&&Q!==void 0&&Q.length>0&&x.length>1&&(x[x.length-2]+=x.pop())},n4=(x)=>{let G=x.split(" "),J=G.length;for(;J>0&&!(r(G[J-1])>0);)J--;return J===G.length?x:G.slice(0,J).join(" ")+G.slice(J).join("")},i4=(x,G,J={})=>{if(J.trim!==!1&&x.trim()==="")return"";let $="",N,Z,Q=x.split(" "),X=h4(Q),z=[""];for(let[g,j]of Q.entries()){J.trim!==!1&&(z[z.length-1]=(z.at(-1)??"").trimStart());let O=r(z.at(-1)??"");if(g!==0&&(O>=G&&(J.wordWrap===!1||J.trim===!1)&&(z.push(""),O=0),(O>0||J.trim===!1)&&(z[z.length-1]+=" ",O++)),J.hard&&X[g]>G){let B=G-O,q=1+Math.floor((X[g]-B-1)/G);Math.floor((X[g]-1)/G)<q&&z.push(""),c0(z,j,G);continue}if(O+X[g]>G&&O>0&&X[g]>0){if(J.wordWrap===!1&&O<G){c0(z,j,G);continue}z.push("")}if(O+X[g]>G&&J.wordWrap===!1){c0(z,j,G);continue}z[z.length-1]+=j}J.trim!==!1&&(z=z.map((g)=>n4(g)));let I=z.join(`
`),C=I[Symbol.iterator](),K=C.next(),H=C.next(),R=0;for(;!K.done;){let g=K.value,j=H.value;if($+=g,g===I0||g===J2){ox.lastIndex=R+1;let B=ox.exec(I)?.groups;if(B?.code!==void 0){let q=Number.parseFloat(B.code);N=q===l4?void 0:q}else B?.uri!==void 0&&(Z=B.uri.length===0?void 0:B.uri)}let O=N?k4(N):void 0;j===`
`?(Z&&($+=rx("")),N&&O&&($+=sx(O))):g===`
`&&(N&&O&&($+=sx(N)),Z&&($+=rx(Z))),R+=g.length,K=H,H=C.next()}return $};function m1(x,G,J){return String(x).normalize().replaceAll(`\r
`,`
`).split(`
`).map(($)=>i4($,G,J)).join(`
`)}var c4=(x,G,J,$,N)=>{let Z=G,Q=0;for(let X=J;X<$;X++){let z=x[X];if(Z=Z-z.length,Q++,Z<=N)break}return{lineCount:Z,removals:Q}},o0=(x)=>{let{cursor:G,options:J,style:$}=x,N=x.output??process.stdout,Z=W1(N),Q=x.columnPadding??0,X=x.rowPadding??4,z=Z-Q,I=d0(N),C=Y.default.dim("..."),K=x.maxItems??Number.POSITIVE_INFINITY,H=Math.max(I-X,0),R=Math.max(Math.min(K,H),5),g=0;G>=R-3&&(g=Math.max(Math.min(G-R+3,J.length-R),0));let j=R<J.length&&g>0,O=R<J.length&&g+R<J.length,B=Math.min(g+R,J.length),q=[],A=0;j&&A++,O&&A++;let T=g+(j?1:0),_=B-(O?1:0);for(let V=T;V<_;V++){let M=m1($(J[V],V===G),z,{hard:!0,trim:!1}).split(`
`);q.push(M),A+=M.length}if(A>H){let V=0,M=0,E=A,u=G-T,b=(I1,W)=>c4(q,E,I1,W,H);j?({lineCount:E,removals:V}=b(0,u),E>H&&({lineCount:E,removals:M}=b(u+1,q.length))):({lineCount:E,removals:M}=b(u+1,q.length),E>H&&({lineCount:E,removals:V}=b(0,u))),V>0&&(j=!0,q.splice(0,V)),M>0&&(O=!0,q.splice(q.length-M,M))}let F=[];j&&F.push(C);for(let V of q)for(let M of V)F.push(M);return O&&F.push(C),F};var N1={message:(x=[],{symbol:G=Y.default.gray(S),secondarySymbol:J=Y.default.gray(S),output:$=process.stdout,spacing:N=1,withGuide:Z}={})=>{let Q=[],X=(Z??s.withGuide)!==!1,z=X?J:"",I=X?`${G}  `:"",C=X?`${J}  `:"";for(let H=0;H<N;H++)Q.push(z);let K=Array.isArray(x)?x:x.split(`
`);if(K.length>0){let[H,...R]=K;H.length>0?Q.push(`${I}${H}`):Q.push(X?G:"");for(let g of R)g.length>0?Q.push(`${C}${g}`):Q.push(X?J:"")}$.write(`${Q.join(`
`)}
`)},info:(x,G)=>{N1.message(x,{...G,symbol:Y.default.blue(W4)})},success:(x,G)=>{N1.message(x,{...G,symbol:Y.default.green(S4)})},step:(x,G)=>{N1.message(x,{...G,symbol:Y.default.green(z0)})},warn:(x,G)=>{N1.message(x,{...G,symbol:Y.default.yellow(v4)})},warning:(x,G)=>{N1.warn(x,G)},error:(x,G)=>{N1.message(x,{...G,symbol:Y.default.red(y4)})}},a0=(x="",G)=>{(G?.output??process.stdout).write(`${Y.default.gray(E1)}  ${Y.default.red(x)}

`)},Z2=(x="",G)=>{(G?.output??process.stdout).write(`${Y.default.gray(A4)}  ${x}
`)},Q2=(x="",G)=>{(G?.output??process.stdout).write(`${Y.default.gray(S)}
${Y.default.gray(E1)}  ${x}

`)},v1=(x,G)=>x.split(`
`).map((J)=>G(J)).join(`
`),X2=(x)=>{let G=($,N)=>{let Z=$.label??String($.value);return N==="disabled"?`${Y.default.gray(cx)} ${v1(Z,(Q)=>Y.default.strikethrough(Y.default.gray(Q)))}${$.hint?` ${Y.default.dim(`(${$.hint??"disabled"})`)}`:""}`:N==="active"?`${Y.default.cyan(T4)} ${Z}${$.hint?` ${Y.default.dim(`(${$.hint})`)}`:""}`:N==="selected"?`${Y.default.green(ix)} ${v1(Z,Y.default.dim)}${$.hint?` ${Y.default.dim(`(${$.hint})`)}`:""}`:N==="cancelled"?`${v1(Z,(Q)=>Y.default.strikethrough(Y.default.dim(Q)))}`:N==="active-selected"?`${Y.default.green(ix)} ${Z}${$.hint?` ${Y.default.dim(`(${$.hint})`)}`:""}`:N==="submitted"?`${v1(Z,Y.default.dim)}`:`${Y.default.dim(cx)} ${v1(Z,Y.default.dim)}`},J=x.required??!0;return new k0({options:x.options,signal:x.signal,input:x.input,output:x.output,initialValues:x.initialValues,required:J,cursorAt:x.cursorAt,validate($){if(J&&($===void 0||$.length===0))return`Please select at least one option.
${Y.default.reset(Y.default.dim(`Press ${Y.default.gray(Y.default.bgWhite(Y.default.inverse(" space ")))} to select, ${Y.default.gray(Y.default.bgWhite(Y.default.inverse(" enter ")))} to submit`))}`},render(){let $=j1(x.output,x.message,`${x2(this.state)}  `,`${ex(this.state)}  `),N=`${Y.default.gray(S)}
${$}
`,Z=this.value??[],Q=(X,z)=>{if(X.disabled)return G(X,"disabled");let I=Z.includes(X.value);return z&&I?G(X,"active-selected"):I?G(X,"selected"):G(X,z?"active":"inactive")};switch(this.state){case"submit":{let X=this.options.filter(({value:I})=>Z.includes(I)).map((I)=>G(I,"submitted")).join(Y.default.dim(", "))||Y.default.dim("none"),z=j1(x.output,X,`${Y.default.gray(S)}  `);return`${N}${z}`}case"cancel":{let X=this.options.filter(({value:I})=>Z.includes(I)).map((I)=>G(I,"cancelled")).join(Y.default.dim(", "));if(X.trim()==="")return`${N}${Y.default.gray(S)}`;let z=j1(x.output,X,`${Y.default.gray(S)}  `);return`${N}${z}
${Y.default.gray(S)}`}case"error":{let X=`${Y.default.yellow(S)}  `,z=this.error.split(`
`).map((K,H)=>H===0?`${Y.default.yellow(E1)}  ${Y.default.yellow(K)}`:`   ${K}`).join(`
`),I=N.split(`
`).length,C=z.split(`
`).length+1;return`${N}${X}${o0({output:x.output,options:this.options,cursor:this.cursor,maxItems:x.maxItems,columnPadding:X.length,rowPadding:I+C,style:Q}).join(`
${X}`)}
${z}
`}default:{let X=`${Y.default.cyan(S)}  `,z=N.split(`
`).length;return`${N}${X}${o0({output:x.output,options:this.options,cursor:this.cursor,maxItems:x.maxItems,columnPadding:X.length,rowPadding:z+2,style:Q}).join(`
${X}`)}
${Y.default.cyan(E1)}
`}}}}).prompt()},p4=(x)=>Y.default.dim(x),o4=(x,G,J)=>{let $={hard:!0,trim:!1},N=m1(x,G,$).split(`
`),Z=N.reduce((z,I)=>Math.max(r(I),z),0),Q=N.map(J).reduce((z,I)=>Math.max(r(I),z),0),X=G-(Q-Z);return m1(x,X,$)},z2=(x="",G="",J)=>{let $=J?.output??h.stdout,N=(J?.withGuide??s.withGuide)!==!1,Z=J?.format??p4,Q=["",...o4(x,W1($)-6,Z).split(`
`).map(Z),""],X=r(G),z=Math.max(Q.reduce((H,R)=>{let g=r(R);return g>H?g:H},0),X)+2,I=Q.map((H)=>`${Y.default.gray(S)}  ${H}${" ".repeat(z-r(H))}${Y.default.gray(S)}`).join(`
`),C=N?`${Y.default.gray(S)}
`:"",K=N?L4:P4;$.write(`${C}${Y.default.green(z0)}  ${Y.default.reset(G)} ${Y.default.gray(px.repeat(Math.max(z-X-1,1))+_4)}
${I}
${Y.default.gray(K+px.repeat(z+2)+F4)}
`)};var s4=Y.default.magenta,I2=({indicator:x="dots",onCancel:G,output:J=process.stdout,cancelMessage:$,errorMessage:N,frames:Z=p0?["","","",""]:["","o","O","0"],delay:Q=p0?80:120,signal:X,...z}={})=>{let I=B4(),C,K,H=!1,R=!1,g="",j,O=performance.now(),B=W1(J),q=z?.styleFrame??s4,A=(W)=>{let k=W>1?N??s.messages.error:$??s.messages.cancel;R=W===1,H&&(I1(k,W),R&&typeof G=="function"&&G())},T=()=>A(2),_=()=>A(1),F=()=>{process.on("uncaughtExceptionMonitor",T),process.on("unhandledRejection",T),process.on("SIGINT",_),process.on("SIGTERM",_),process.on("exit",A),X&&X.addEventListener("abort",_)},V=()=>{process.removeListener("uncaughtExceptionMonitor",T),process.removeListener("unhandledRejection",T),process.removeListener("SIGINT",_),process.removeListener("SIGTERM",_),process.removeListener("exit",A),X&&X.removeEventListener("abort",_)},M=()=>{if(j===void 0)return;I&&J.write(`
`);let W=m1(j,B,{hard:!0,trim:!1}).split(`
`);W.length>1&&J.write(y1.cursor.up(W.length-1)),J.write(y1.cursor.to(0)),J.write(y1.erase.down())},E=(W)=>W.replace(/\.+$/,""),u=(W)=>{let k=(performance.now()-W)/1000,t=Math.floor(k/60),e=Math.floor(k%60);return t>0?`[${t}m ${e}s]`:`[${e}s]`},b=(W="")=>{H=!0,C=dx({output:J}),g=E(W),O=performance.now(),J.write(`${Y.default.gray(S)}
`);let k=0,t=0;F(),K=setInterval(()=>{if(I&&g===j)return;M(),j=g;let e=q(Z[k]),s1;if(I)s1=`${e}  ${g}...`;else if(x==="timer")s1=`${e}  ${g} ${u(O)}`;else{let n3=".".repeat(Math.floor(t)).slice(0,3);s1=`${e}  ${g}${n3}`}let h3=m1(s1,B,{hard:!0,trim:!1});J.write(h3),k=k+1<Z.length?k+1:0,t=t<4?t+0.125:0},Q)},I1=(W="",k=0,t=!1)=>{if(!H)return;H=!1,clearInterval(K),M();let e=k===0?Y.default.green(z0):k===1?Y.default.red(ax):Y.default.red(tx);g=W??g,t||(x==="timer"?J.write(`${e}  ${g} ${u(O)}
`):J.write(`${e}  ${g}
`)),V(),C()};return{start:b,stop:(W="")=>I1(W,0),message:(W="")=>{g=E(W??g)},cancel:(W="")=>I1(W,1),error:(W="")=>I1(W,2),clear:()=>I1("",0,!0),get isCancelled(){return R}}},s5={light:L("","-"),heavy:L("","="),block:L("","#")};var X0=(x,G)=>x.includes(`
`)?x.split(`
`).map((J)=>G(J)).join(`
`):G(x),K2=(x)=>{let G=(J,$)=>{let N=J.label??String(J.value);switch($){case"disabled":return`${Y.default.gray(nx)} ${X0(N,Y.default.gray)}${J.hint?` ${Y.default.dim(`(${J.hint??"disabled"})`)}`:""}`;case"selected":return`${X0(N,Y.default.dim)}`;case"active":return`${Y.default.green(D4)} ${N}${J.hint?` ${Y.default.dim(`(${J.hint})`)}`:""}`;case"cancelled":return`${X0(N,(Z)=>Y.default.strikethrough(Y.default.dim(Z)))}`;default:return`${Y.default.dim(nx)} ${X0(N,Y.default.dim)}`}};return new h0({options:x.options,signal:x.signal,input:x.input,output:x.output,initialValue:x.initialValue,render(){let J=`${ex(this.state)}  `,$=`${x2(this.state)}  `,N=j1(x.output,x.message,$,J),Z=`${Y.default.gray(S)}
${N}
`;switch(this.state){case"submit":{let Q=`${Y.default.gray(S)}  `,X=j1(x.output,G(this.options[this.cursor],"selected"),Q);return`${Z}${X}`}case"cancel":{let Q=`${Y.default.gray(S)}  `,X=j1(x.output,G(this.options[this.cursor],"cancelled"),Q);return`${Z}${X}
${Y.default.gray(S)}`}default:{let Q=`${Y.default.cyan(S)}  `,X=Z.split(`
`).length;return`${Z}${Q}${o0({output:x.output,cursor:this.cursor,options:this.options,maxItems:x.maxItems,columnPadding:Q.length,rowPadding:X+2,style:(z,I)=>G(z,z.disabled?"disabled":I?"active":"inactive")}).join(`
${Q}`)}
${Y.default.cyan(E1)}
`}}}}).prompt()};var r5=`${Y.default.gray(S)}  `;var O1=i(L1(),1);import{existsSync as l3,mkdirSync as d3,writeFileSync as k3}from"node:fs";import{dirname as U5,join as o1}from"node:path";import{EventEmitter as _9}from"node:events";import{stat as L9,Stats as z8}from"node:fs";import{readdir as F9,stat as P9}from"node:fs/promises";import*as D from"node:path";import{lstat as j2,readdir as a4,realpath as t4,stat as e4}from"node:fs/promises";import{join as x9,relative as G9,resolve as g2,sep as J9}from"node:path";import{Readable as $9}from"node:stream";var l={FILE_TYPE:"files",DIR_TYPE:"directories",FILE_DIR_TYPE:"files_directories",EVERYTHING_TYPE:"all"},t0={root:".",fileFilter:(x)=>!0,directoryFilter:(x)=>!0,type:l.FILE_TYPE,lstat:!1,depth:2147483648,alwaysStat:!1,highWaterMark:4096};Object.freeze(t0);var V2="READDIRP_RECURSIVE_ERROR",N9=new Set(["ENOENT","EPERM","EACCES","ELOOP",V2]),C2=[l.DIR_TYPE,l.EVERYTHING_TYPE,l.FILE_DIR_TYPE,l.FILE_TYPE],Z9=new Set([l.DIR_TYPE,l.EVERYTHING_TYPE,l.FILE_DIR_TYPE]),Q9=new Set([l.EVERYTHING_TYPE,l.FILE_DIR_TYPE,l.FILE_TYPE]),X9=(x)=>N9.has(x.code),z9=process.platform==="win32",Y2=(x)=>!0,H2=(x)=>{if(x===void 0)return Y2;if(typeof x==="function")return x;if(typeof x==="string"){let G=x.trim();return(J)=>J.basename===G}if(Array.isArray(x)){let G=x.map((J)=>J.trim());return(J)=>G.some(($)=>J.basename===$)}return Y2};class e0 extends $9{parents;reading;parent;_stat;_maxDepth;_wantsDir;_wantsFile;_wantsEverything;_root;_isDirent;_statsProp;_rdOptions;_fileFilter;_directoryFilter;constructor(x={}){super({objectMode:!0,autoDestroy:!0,highWaterMark:x.highWaterMark});let G={...t0,...x},{root:J,type:$}=G;this._fileFilter=H2(G.fileFilter),this._directoryFilter=H2(G.directoryFilter);let N=G.lstat?j2:e4;if(z9)this._stat=(Z)=>N(Z,{bigint:!0});else this._stat=N;this._maxDepth=G.depth!=null&&Number.isSafeInteger(G.depth)?G.depth:t0.depth,this._wantsDir=$?Z9.has($):!1,this._wantsFile=$?Q9.has($):!1,this._wantsEverything=$===l.EVERYTHING_TYPE,this._root=g2(J),this._isDirent=!G.alwaysStat,this._statsProp=this._isDirent?"dirent":"stats",this._rdOptions={encoding:"utf8",withFileTypes:this._isDirent},this.parents=[this._exploreDir(J,1)],this.reading=!1,this.parent=void 0}async _read(x){if(this.reading)return;this.reading=!0;try{while(!this.destroyed&&x>0){let G=this.parent,J=G&&G.files;if(J&&J.length>0){let{path:$,depth:N}=G,Z=J.splice(0,x).map((X)=>this._formatEntry(X,$)),Q=await Promise.all(Z);for(let X of Q){if(!X)continue;if(this.destroyed)return;let z=await this._getEntryType(X);if(z==="directory"&&this._directoryFilter(X)){if(N<=this._maxDepth)this.parents.push(this._exploreDir(X.fullPath,N+1));if(this._wantsDir)this.push(X),x--}else if((z==="file"||this._includeAsFile(X))&&this._fileFilter(X)){if(this._wantsFile)this.push(X),x--}}}else{let $=this.parents.pop();if(!$){this.push(null);break}if(this.parent=await $,this.destroyed)return}}}catch(G){this.destroy(G)}finally{this.reading=!1}}async _exploreDir(x,G){let J;try{J=await a4(x,this._rdOptions)}catch($){this._onError($)}return{files:J,depth:G,path:x}}async _formatEntry(x,G){let J,$=this._isDirent?x.name:x;try{let N=g2(x9(G,$));J={path:G9(this._root,N),fullPath:N,basename:$},J[this._statsProp]=this._isDirent?x:await this._stat(N)}catch(N){this._onError(N);return}return J}_onError(x){if(X9(x)&&!this.destroyed)this.emit("warn",x);else this.destroy(x)}async _getEntryType(x){if(!x&&this._statsProp in x)return"";let G=x[this._statsProp];if(G.isFile())return"file";if(G.isDirectory())return"directory";if(G&&G.isSymbolicLink()){let J=x.fullPath;try{let $=await t4(J),N=await j2($);if(N.isFile())return"file";if(N.isDirectory()){let Z=$.length;if(J.startsWith($)&&J.substr(Z,1)===J9){let Q=Error(`Circular symlink detected: "${J}" points to "${$}"`);return Q.code=V2,this._onError(Q)}return"directory"}}catch($){return this._onError($),""}}}_includeAsFile(x){let G=x&&x[this._statsProp];return G&&this._wantsEverything&&!G.isDirectory()}}function O2(x,G={}){let J=G.entryType||G.type;if(J==="both")J=l.FILE_DIR_TYPE;if(J)G.type=J;if(!x)throw Error("readdirp: root argument is required. Usage: readdirp(root, options)");else if(typeof x!=="string")throw TypeError("readdirp: root argument must be a string. Usage: readdirp(root, options)");else if(J&&!C2.includes(J))throw Error(`readdirp: Invalid type passed. Use one of ${C2.join(", ")}`);return G.root=x,new e0(G)}import{watch as I9,unwatchFile as R2,watchFile as K9}from"node:fs";import{realpath as xx,lstat as j9,open as g9,stat as q2}from"node:fs/promises";import{type as C9}from"node:os";import*as v from"node:path";var Y9="data",$x="end",B2="close",C0=()=>{};var Y0=process.platform,Nx=Y0==="win32",H9=Y0==="darwin",V9=Y0==="linux",O9=Y0==="freebsd",U2=C9()==="OS400",P={ALL:"all",READY:"ready",ADD:"add",CHANGE:"change",ADD_DIR:"addDir",UNLINK:"unlink",UNLINK_DIR:"unlinkDir",RAW:"raw",ERROR:"error"},c=P,R9="watch",M9={lstat:j9,stat:q2},g1="listeners",K0="errHandlers",R1="rawEmitters",q9=[g1,K0,R1],B9=new Set(["3dm","3ds","3g2","3gp","7z","a","aac","adp","afdesign","afphoto","afpub","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"]),U9=(x)=>B9.has(v.extname(x).slice(1).toLowerCase()),Jx=(x,G)=>{if(x instanceof Set)x.forEach(G);else G(x)},u1=(x,G,J)=>{let $=x[G];if(!($ instanceof Set))x[G]=$=new Set([$]);$.add(J)},A9=(x)=>(G)=>{let J=x[G];if(J instanceof Set)J.clear();else delete x[G]},w1=(x,G,J)=>{let $=x[G];if($ instanceof Set)$.delete(J);else if($===J)delete x[G]},A2=(x)=>x instanceof Set?x.size===0:!x,j0=new Map;function M2(x,G,J,$,N){let Z=(Q,X)=>{if(J(x),N(Q,X,{watchedPath:x}),X&&x!==X)g0(v.resolve(x,X),g1,v.join(x,X))};try{return I9(x,{persistent:G.persistent},Z)}catch(Q){$(Q);return}}var g0=(x,G,J,$,N)=>{let Z=j0.get(x);if(!Z)return;Jx(Z[G],(Q)=>{Q(J,$,N)})},D9=(x,G,J,$)=>{let{listener:N,errHandler:Z,rawEmitter:Q}=$,X=j0.get(G),z;if(!J.persistent){if(z=M2(x,J,N,Z,Q),!z)return;return z.close.bind(z)}if(X)u1(X,g1,N),u1(X,K0,Z),u1(X,R1,Q);else{if(z=M2(x,J,g0.bind(null,G,g1),Z,g0.bind(null,G,R1)),!z)return;z.on(c.ERROR,async(I)=>{let C=g0.bind(null,G,K0);if(X)X.watcherUnusable=!0;if(Nx&&I.code==="EPERM")try{await(await g9(x,"r")).close(),C(I)}catch(K){}else C(I)}),X={listeners:N,errHandlers:Z,rawEmitters:Q,watcher:z},j0.set(G,X)}return()=>{if(w1(X,g1,N),w1(X,K0,Z),w1(X,R1,Q),A2(X.listeners))X.watcher.close(),j0.delete(G),q9.forEach(A9(X)),X.watcher=void 0,Object.freeze(X)}},Gx=new Map,T9=(x,G,J,$)=>{let{listener:N,rawEmitter:Z}=$,Q=Gx.get(G),X=Q&&Q.options;if(X&&(X.persistent<J.persistent||X.interval>J.interval))R2(G),Q=void 0;if(Q)u1(Q,g1,N),u1(Q,R1,Z);else Q={listeners:N,rawEmitters:Z,options:J,watcher:K9(G,J,(z,I)=>{Jx(Q.rawEmitters,(K)=>{K(c.CHANGE,G,{curr:z,prev:I})});let C=z.mtimeMs;if(z.size!==I.size||C>I.mtimeMs||C===0)Jx(Q.listeners,(K)=>K(x,z))})},Gx.set(G,Q);return()=>{if(w1(Q,g1,N),w1(Q,R1,Z),A2(Q.listeners))Gx.delete(G),R2(G),Q.options=Q.watcher=void 0,Object.freeze(Q)}};class Zx{fsw;_boundHandleError;constructor(x){this.fsw=x,this._boundHandleError=(G)=>x._handleError(G)}_watchWithNodeFs(x,G){let J=this.fsw.options,$=v.dirname(x),N=v.basename(x);this.fsw._getWatchedDir($).add(N);let Q=v.resolve(x),X={persistent:J.persistent};if(!G)G=C0;let z;if(J.usePolling){let I=J.interval!==J.binaryInterval;X.interval=I&&U9(N)?J.binaryInterval:J.interval,z=T9(x,Q,X,{listener:G,rawEmitter:this.fsw._emitRaw})}else z=D9(x,Q,X,{listener:G,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw});return z}_handleFile(x,G,J){if(this.fsw.closed)return;let $=v.dirname(x),N=v.basename(x),Z=this.fsw._getWatchedDir($),Q=G;if(Z.has(N))return;let X=async(I,C)=>{if(!this.fsw._throttle(R9,x,5))return;if(!C||C.mtimeMs===0)try{let K=await q2(x);if(this.fsw.closed)return;let{atimeMs:H,mtimeMs:R}=K;if(!H||H<=R||R!==Q.mtimeMs)this.fsw._emit(c.CHANGE,x,K);if((H9||V9||O9)&&Q.ino!==K.ino){this.fsw._closeFile(I),Q=K;let g=this._watchWithNodeFs(x,X);if(g)this.fsw._addPathCloser(I,g)}else Q=K}catch(K){this.fsw._remove($,N)}else if(Z.has(N)){let{atimeMs:K,mtimeMs:H}=C;if(!K||K<=H||H!==Q.mtimeMs)this.fsw._emit(c.CHANGE,x,C);Q=C}},z=this._watchWithNodeFs(x,X);if(!(J&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(x)){if(!this.fsw._throttle(c.ADD,x,0))return;this.fsw._emit(c.ADD,x,G)}return z}async _handleSymlink(x,G,J,$){if(this.fsw.closed)return;let N=x.fullPath,Z=this.fsw._getWatchedDir(G);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let Q;try{Q=await xx(J)}catch(X){return this.fsw._emitReady(),!0}if(this.fsw.closed)return;if(Z.has($)){if(this.fsw._symlinkPaths.get(N)!==Q)this.fsw._symlinkPaths.set(N,Q),this.fsw._emit(c.CHANGE,J,x.stats)}else Z.add($),this.fsw._symlinkPaths.set(N,Q),this.fsw._emit(c.ADD,J,x.stats);return this.fsw._emitReady(),!0}if(this.fsw._symlinkPaths.has(N))return!0;this.fsw._symlinkPaths.set(N,!0)}_handleRead(x,G,J,$,N,Z,Q){x=v.join(x,"");let X=$?`${x}:${$}`:x;if(Q=this.fsw._throttle("readdir",X,1000),!Q)return;let z=this.fsw._getWatchedDir(J.path),I=new Set,C=this.fsw._readdirp(x,{fileFilter:(K)=>J.filterPath(K),directoryFilter:(K)=>J.filterDir(K)});if(!C)return;return C.on(Y9,async(K)=>{if(this.fsw.closed){C=void 0;return}let H=K.path,R=v.join(x,H);if(I.add(H),K.stats.isSymbolicLink()&&await this._handleSymlink(K,x,R,H))return;if(this.fsw.closed){C=void 0;return}if(H===$||!$&&!z.has(H))this.fsw._incrReadyCount(),R=v.join(N,v.relative(N,R)),this._addToNodeFs(R,G,J,Z+1)}).on(c.ERROR,this._boundHandleError),new Promise((K,H)=>{if(!C)return H();C.once($x,()=>{if(this.fsw.closed){C=void 0;return}let R=Q?Q.clear():!1;if(K(void 0),z.getChildren().filter((g)=>{return g!==x&&!I.has(g)}).forEach((g)=>{this.fsw._remove(x,g)}),C=void 0,R)this._handleRead(x,!1,J,$,N,Z,Q)})})}async _handleDir(x,G,J,$,N,Z,Q){let X=this.fsw._getWatchedDir(v.dirname(x)),z=X.has(v.basename(x));if(!(J&&this.fsw.options.ignoreInitial)&&!N&&!z)this.fsw._emit(c.ADD_DIR,x,G);X.add(v.basename(x)),this.fsw._getWatchedDir(x);let I,C,K=this.fsw.options.depth;if((K==null||$<=K)&&!this.fsw._symlinkPaths.has(Q)){if(!N){if(await this._handleRead(x,J,Z,N,x,$,I),this.fsw.closed)return}C=this._watchWithNodeFs(x,(H,R)=>{if(R&&R.mtimeMs===0)return;this._handleRead(H,!1,Z,N,x,$,I)})}return C}async _addToNodeFs(x,G,J,$,N){let Z=this.fsw._emitReady;if(this.fsw._isIgnored(x)||this.fsw.closed)return Z(),!1;let Q=this.fsw._getWatchHelpers(x);if(J)Q.filterPath=(X)=>J.filterPath(X),Q.filterDir=(X)=>J.filterDir(X);try{let X=await M9[Q.statMethod](Q.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(Q.watchPath,X))return Z(),!1;let z=this.fsw.options.followSymlinks,I;if(X.isDirectory()){let C=v.resolve(x),K=z?await xx(x):x;if(this.fsw.closed)return;if(I=await this._handleDir(Q.watchPath,X,G,$,N,Q,K),this.fsw.closed)return;if(C!==K&&K!==void 0)this.fsw._symlinkPaths.set(C,K)}else if(X.isSymbolicLink()){let C=z?await xx(x):x;if(this.fsw.closed)return;let K=v.dirname(Q.watchPath);if(this.fsw._getWatchedDir(K).add(Q.watchPath),this.fsw._emit(c.ADD,Q.watchPath,X),I=await this._handleDir(K,X,G,$,x,Q,C),this.fsw.closed)return;if(C!==void 0)this.fsw._symlinkPaths.set(v.resolve(x),C)}else I=this._handleFile(Q.watchPath,X,G);if(Z(),I)this.fsw._addPathCloser(x,I);return!1}catch(X){if(this.fsw._handleError(X))return Z(),x}}}/*! chokidar - MIT License (c) 2012 Paul Miller (paulmillr.com) */var Qx="/",W9="//",F2=".",S9="..",v9="string",y9=/\\/g,P2=/\/\//g,E9=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/,m9=/^\.[/\\]/;function H0(x){return Array.isArray(x)?x:[x]}var Xx=(x)=>typeof x==="object"&&x!==null&&!(x instanceof RegExp);function u9(x){if(typeof x==="function")return x;if(typeof x==="string")return(G)=>x===G;if(x instanceof RegExp)return(G)=>x.test(G);if(typeof x==="object"&&x!==null)return(G)=>{if(x.path===G)return!0;if(x.recursive){let J=D.relative(x.path,G);if(!J)return!1;return!J.startsWith("..")&&!D.isAbsolute(J)}return!1};return()=>!1}function w9(x){if(typeof x!=="string")throw Error("string expected");x=D.normalize(x),x=x.replace(/\\/g,"/");let G=!1;if(x.startsWith("//"))G=!0;if(x=x.replace(P2,"/"),G)x="/"+x;return x}function D2(x,G,J){let $=w9(G);for(let N=0;N<x.length;N++){let Z=x[N];if(Z($,J))return!0}return!1}function f9(x,G){if(x==null)throw TypeError("anymatch: specify first argument");let $=H0(x).map((N)=>u9(N));if(G==null)return(N,Z)=>{return D2($,N,Z)};return D2($,G)}var T2=(x)=>{let G=H0(x).flat();if(!G.every((J)=>typeof J===v9))throw TypeError(`Non-string provided as watch path: ${G}`);return G.map(W2)},_2=(x)=>{let G=x.replace(y9,Qx),J=!1;if(G.startsWith(W9))J=!0;if(G=G.replace(P2,Qx),J)G=Qx+G;return G},W2=(x)=>_2(D.normalize(_2(x))),L2=(x="")=>(G)=>{if(typeof G==="string")return W2(D.isAbsolute(G)?G:D.join(x,G));else return G},b9=(x,G)=>{if(D.isAbsolute(x))return x;return D.join(G,x)},l9=Object.freeze(new Set);class S2{path;_removeWatcher;items;constructor(x,G){this.path=x,this._removeWatcher=G,this.items=new Set}add(x){let{items:G}=this;if(!G)return;if(x!==F2&&x!==S9)G.add(x)}async remove(x){let{items:G}=this;if(!G)return;if(G.delete(x),G.size>0)return;let J=this.path;try{await F9(J)}catch($){if(this._removeWatcher)this._removeWatcher(D.dirname(J),D.basename(J))}}has(x){let{items:G}=this;if(!G)return;return G.has(x)}getChildren(){let{items:x}=this;if(!x)return[];return[...x.values()]}dispose(){this.items.clear(),this.path="",this._removeWatcher=C0,this.items=l9,Object.freeze(this)}}var d9="stat",k9="lstat";class v2{fsw;path;watchPath;fullWatchPath;dirParts;followSymlinks;statMethod;constructor(x,G,J){this.fsw=J;let $=x;this.path=x=x.replace(m9,""),this.watchPath=$,this.fullWatchPath=D.resolve($),this.dirParts=[],this.dirParts.forEach((N)=>{if(N.length>1)N.pop()}),this.followSymlinks=G,this.statMethod=G?d9:k9}entryPath(x){return D.join(this.watchPath,D.relative(this.watchPath,x.fullPath))}filterPath(x){let{stats:G}=x;if(G&&G.isSymbolicLink())return this.filterDir(x);let J=this.entryPath(x);return this.fsw._isntIgnored(J,G)&&this.fsw._hasReadPermissions(G)}filterDir(x){return this.fsw._isntIgnored(this.entryPath(x),x.stats)}}class y2 extends _9{closed;options;_closers;_ignoredPaths;_throttled;_streams;_symlinkPaths;_watched;_pendingWrites;_pendingUnlinks;_readyCount;_emitReady;_closePromise;_userIgnored;_readyEmitted;_emitRaw;_boundRemove;_nodeFsHandler;constructor(x={}){super();this.closed=!1,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._streams=new Set,this._symlinkPaths=new Map,this._watched=new Map,this._pendingWrites=new Map,this._pendingUnlinks=new Map,this._readyCount=0,this._readyEmitted=!1;let G=x.awaitWriteFinish,J={stabilityThreshold:2000,pollInterval:100},$={persistent:!0,ignoreInitial:!1,ignorePermissionErrors:!1,interval:100,binaryInterval:300,followSymlinks:!0,usePolling:!1,atomic:!0,...x,ignored:x.ignored?H0(x.ignored):H0([]),awaitWriteFinish:G===!0?J:typeof G==="object"?{...J,...G}:!1};if(U2)$.usePolling=!0;if($.atomic===void 0)$.atomic=!$.usePolling;let N=process.env.CHOKIDAR_USEPOLLING;if(N!==void 0){let X=N.toLowerCase();if(X==="false"||X==="0")$.usePolling=!1;else if(X==="true"||X==="1")$.usePolling=!0;else $.usePolling=!!X}let Z=process.env.CHOKIDAR_INTERVAL;if(Z)$.interval=Number.parseInt(Z,10);let Q=0;this._emitReady=()=>{if(Q++,Q>=this._readyCount)this._emitReady=C0,this._readyEmitted=!0,process.nextTick(()=>this.emit(P.READY))},this._emitRaw=(...X)=>this.emit(P.RAW,...X),this._boundRemove=this._remove.bind(this),this.options=$,this._nodeFsHandler=new Zx(this),Object.freeze($)}_addIgnoredPath(x){if(Xx(x)){for(let G of this._ignoredPaths)if(Xx(G)&&G.path===x.path&&G.recursive===x.recursive)return}this._ignoredPaths.add(x)}_removeIgnoredPath(x){if(this._ignoredPaths.delete(x),typeof x==="string"){for(let G of this._ignoredPaths)if(Xx(G)&&G.path===x)this._ignoredPaths.delete(G)}}add(x,G,J){let{cwd:$}=this.options;this.closed=!1,this._closePromise=void 0;let N=T2(x);if($)N=N.map((Z)=>{return b9(Z,$)});if(N.forEach((Z)=>{this._removeIgnoredPath(Z)}),this._userIgnored=void 0,!this._readyCount)this._readyCount=0;return this._readyCount+=N.length,Promise.all(N.map(async(Z)=>{let Q=await this._nodeFsHandler._addToNodeFs(Z,!J,void 0,0,G);if(Q)this._emitReady();return Q})).then((Z)=>{if(this.closed)return;Z.forEach((Q)=>{if(Q)this.add(D.dirname(Q),D.basename(G||Q))})}),this}unwatch(x){if(this.closed)return this;let G=T2(x),{cwd:J}=this.options;return G.forEach(($)=>{if(!D.isAbsolute($)&&!this._closers.has($)){if(J)$=D.join(J,$);$=D.resolve($)}if(this._closePath($),this._addIgnoredPath($),this._watched.has($))this._addIgnoredPath({path:$,recursive:!0});this._userIgnored=void 0}),this}close(){if(this._closePromise)return this._closePromise;this.closed=!0,this.removeAllListeners();let x=[];return this._closers.forEach((G)=>G.forEach((J)=>{let $=J();if($ instanceof Promise)x.push($)})),this._streams.forEach((G)=>G.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach((G)=>G.dispose()),this._closers.clear(),this._watched.clear(),this._streams.clear(),this._symlinkPaths.clear(),this._throttled.clear(),this._closePromise=x.length?Promise.all(x).then(()=>{return}):Promise.resolve(),this._closePromise}getWatched(){let x={};return this._watched.forEach((G,J)=>{let N=(this.options.cwd?D.relative(this.options.cwd,J):J)||F2;x[N]=G.getChildren().sort()}),x}emitWithAll(x,G){if(this.emit(x,...G),x!==P.ERROR)this.emit(P.ALL,x,...G)}async _emit(x,G,J){if(this.closed)return;let $=this.options;if(Nx)G=D.normalize(G);if($.cwd)G=D.relative($.cwd,G);let N=[G];if(J!=null)N.push(J);let Z=$.awaitWriteFinish,Q;if(Z&&(Q=this._pendingWrites.get(G)))return Q.lastChange=new Date,this;if($.atomic){if(x===P.UNLINK)return this._pendingUnlinks.set(G,[x,...N]),setTimeout(()=>{this._pendingUnlinks.forEach((X,z)=>{this.emit(...X),this.emit(P.ALL,...X),this._pendingUnlinks.delete(z)})},typeof $.atomic==="number"?$.atomic:100),this;if(x===P.ADD&&this._pendingUnlinks.has(G))x=P.CHANGE,this._pendingUnlinks.delete(G)}if(Z&&(x===P.ADD||x===P.CHANGE)&&this._readyEmitted){let X=(z,I)=>{if(z)x=P.ERROR,N[0]=z,this.emitWithAll(x,N);else if(I){if(N.length>1)N[1]=I;else N.push(I);this.emitWithAll(x,N)}};return this._awaitWriteFinish(G,Z.stabilityThreshold,x,X),this}if(x===P.CHANGE){if(!this._throttle(P.CHANGE,G,50))return this}if($.alwaysStat&&J===void 0&&(x===P.ADD||x===P.ADD_DIR||x===P.CHANGE)){let X=$.cwd?D.join($.cwd,G):G,z;try{z=await P9(X)}catch(I){}if(!z||this.closed)return;N.push(z)}return this.emitWithAll(x,N),this}_handleError(x){let G=x&&x.code;if(x&&G!=="ENOENT"&&G!=="ENOTDIR"&&(!this.options.ignorePermissionErrors||G!=="EPERM"&&G!=="EACCES"))this.emit(P.ERROR,x);return x||this.closed}_throttle(x,G,J){if(!this._throttled.has(x))this._throttled.set(x,new Map);let $=this._throttled.get(x);if(!$)throw Error("invalid throttle");let N=$.get(G);if(N)return N.count++,!1;let Z,Q=()=>{let z=$.get(G),I=z?z.count:0;if($.delete(G),clearTimeout(Z),z)clearTimeout(z.timeoutObject);return I};Z=setTimeout(Q,J);let X={timeoutObject:Z,clear:Q,count:0};return $.set(G,X),X}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(x,G,J,$){let N=this.options.awaitWriteFinish;if(typeof N!=="object")return;let Z=N.pollInterval,Q,X=x;if(this.options.cwd&&!D.isAbsolute(x))X=D.join(this.options.cwd,x);let z=new Date,I=this._pendingWrites;function C(K){L9(X,(H,R)=>{if(H||!I.has(x)){if(H&&H.code!=="ENOENT")$(H);return}let g=Number(new Date);if(K&&R.size!==K.size)I.get(x).lastChange=g;let j=I.get(x);if(g-j.lastChange>=G)I.delete(x),$(void 0,R);else Q=setTimeout(C,Z,R)})}if(!I.has(x))I.set(x,{lastChange:z,cancelWait:()=>{return I.delete(x),clearTimeout(Q),J}}),Q=setTimeout(C,Z)}_isIgnored(x,G){if(this.options.atomic&&E9.test(x))return!0;if(!this._userIgnored){let{cwd:J}=this.options,N=(this.options.ignored||[]).map(L2(J)),Q=[...[...this._ignoredPaths].map(L2(J)),...N];this._userIgnored=f9(Q,void 0)}return this._userIgnored(x,G)}_isntIgnored(x,G){return!this._isIgnored(x,G)}_getWatchHelpers(x){return new v2(x,this.options.followSymlinks,this)}_getWatchedDir(x){let G=D.resolve(x);if(!this._watched.has(G))this._watched.set(G,new S2(G,this._boundRemove));return this._watched.get(G)}_hasReadPermissions(x){if(this.options.ignorePermissionErrors)return!0;return Boolean(Number(x.mode)&256)}_remove(x,G,J){let $=D.join(x,G),N=D.resolve($);if(J=J!=null?J:this._watched.has($)||this._watched.has(N),!this._throttle("remove",$,100))return;if(!J&&this._watched.size===1)this.add(x,G,!0);this._getWatchedDir($).getChildren().forEach((K)=>this._remove($,K));let X=this._getWatchedDir(x),z=X.has(G);if(X.remove(G),this._symlinkPaths.has(N))this._symlinkPaths.delete(N);let I=$;if(this.options.cwd)I=D.relative(this.options.cwd,$);if(this.options.awaitWriteFinish&&this._pendingWrites.has(I)){if(this._pendingWrites.get(I).cancelWait()===P.ADD)return}this._watched.delete($),this._watched.delete(N);let C=J?P.UNLINK_DIR:P.UNLINK;if(z&&!this._isIgnored($))this._emit(C,$);this._closePath($)}_closePath(x){this._closeFile(x);let G=D.dirname(x);this._getWatchedDir(G).remove(D.basename(x))}_closeFile(x){let G=this._closers.get(x);if(!G)return;G.forEach((J)=>J()),this._closers.delete(x)}_addPathCloser(x,G){if(!G)return;let J=this._closers.get(x);if(!J)J=[],this._closers.set(x,J);J.push(G)}_readdirp(x,G){if(this.closed)return;let J={type:P.ALL,alwaysStat:!0,lstat:!0,...G,depth:0},$=O2(x,J);return this._streams.add($),$.once(B2,()=>{$=void 0}),$.once($x,()=>{if($)this._streams.delete($),$=void 0}),$}}function E2(x,G={}){let J=new y2(G);return J.add(x),J}import{createServer as j5}from"node:http";import{readFileSync as g5,existsSync as C5,readdirSync as c1,statSync as _x,mkdirSync as Y5}from"node:fs";import{join as o,basename as f3}from"node:path";var z5=i(P3(),1),I5=i(Cx(),1),K5=i(Hx(),1),Ux=i(_0(),1),Ax=i(u3(),1);var F0=i(L1(),1),w3=process.env.DASHBOARD_PORT?parseInt(process.env.DASHBOARD_PORT):9847;function H5(){if(process.env.MEMORIES_DIR)return process.env.MEMORIES_DIR;let x=process.argv[3];if(x)return o(x,".serena","memories");return o(process.cwd(),".serena","memories")}function p1(x){try{return g5(x,"utf-8")}catch{return""}}function V5(x){try{let G=c1(x);if(G.includes("orchestrator-session.md"))return o(x,"orchestrator-session.md");let J=G.filter(($)=>/^session-.*\.md$/.test($)).map(($)=>({name:$,mtime:_x(o(x,$)).mtimeMs})).sort(($,N)=>N.mtime-$.mtime);if(J.length>0)return o(x,J[0].name)}catch{}return null}function O5(x){let G=V5(x);if(!G)return{id:"N/A",status:"UNKNOWN"};let J=p1(G);if(!J)return{id:"N/A",status:"UNKNOWN"};let $=(J.match(/session-id:\s*(.+)/i)||[])[1]||(J.match(/# Session:\s*(.+)/i)||[])[1]||J.match(/(session-\d{8}-\d{6})/)?.[1]||f3(G,".md")||"N/A",N="UNKNOWN";if(/IN PROGRESS|RUNNING|## Active|\[IN PROGRESS\]/i.test(J))N="RUNNING";else if(/COMPLETED|DONE|## Completed|\[COMPLETED\]/i.test(J))N="COMPLETED";else if(/FAILED|ERROR|## Failed|\[FAILED\]/i.test(J))N="FAILED";else if(/Step \d+:.*\[/i.test(J))N="RUNNING";return{id:$.trim(),status:N}}function R5(x){let G=p1(o(x,"task-board.md"));if(!G)return[];let J=[],$=G.split(`
`);for(let N of $){if(!N.startsWith("|")||/^\|\s*-+/.test(N))continue;let Z=N.split("|").map((Q)=>Q.trim()).filter(Boolean);if(Z.length<2||/^agent$/i.test(Z[0]))continue;J.push({agent:Z[0]||"",status:Z[1]||"pending",task:Z[2]||""})}return J}function Tx(x,G){try{let J=c1(x).filter((Z)=>Z.startsWith(`progress-${G}`)&&Z.endsWith(".md")).sort().reverse();if(J.length===0)return null;let N=p1(o(x,J[0])).match(/turn[:\s]*(\d+)/i);return N?parseInt(N[1],10):null}catch{return null}}function M5(x){try{return c1(x).filter((J)=>J.endsWith(".md")&&J!==".gitkeep").map((J)=>({name:J,mtime:_x(o(x,J)).mtimeMs})).sort((J,$)=>$.mtime-J.mtime).slice(0,10).map((J)=>{let $=J.name.replace(/^(progress|result|session|debug|task)-?/,"").replace(/[-_]agent/,"").replace(/[-_]completion/,"").replace(/\.md$/,"").replace(/[-_]/g," ").trim()||J.name.replace(/\.md$/,""),Z=p1(o(x,J.name)).split(`
`).map((X)=>X.trim()).filter((X)=>X&&!X.startsWith("---")&&X.length>3),Q="";for(let X=Z.length-1;X>=0;X--){let z=Z[X];if(/^\*\*|^#+|^-|^\d+\.|Status|Result|Action|Step/i.test(z)){if(Q=z.replace(/^[#*\-\d.]+\s*/,"").replace(/\*\*/g,"").trim(),Q.length>5)break}}if(Q.length>80)Q=Q.substring(0,77)+"...";return{agent:$,message:Q,file:J.name}}).filter((J)=>J.message)}catch{return[]}}function q5(x){let G=[],J=new Set;try{let $=c1(x).filter((N)=>N.endsWith(".md")&&N!==".gitkeep").map((N)=>({name:N,mtime:_x(o(x,N)).mtimeMs})).sort((N,Z)=>Z.mtime-N.mtime);for(let N of $){let Z=p1(o(x,N.name)),Q=Z.match(/\*\*Agent\*\*:\s*(.+)/i)||Z.match(/Agent:\s*(.+)/i)||Z.match(/^#+\s*(.+?)\s*Agent/im),X=null;if(Q)X=Q[1].trim();else if(/_agent|agent_|-agent/i.test(N.name))X=N.name.replace(/\.md$/,"").replace(/[-_]completion|[-_]progress|[-_]result/gi,"").replace(/[-_]/g," ").trim();if(X&&!J.has(X.toLowerCase())){J.add(X.toLowerCase());let z="unknown";if(/\[COMPLETED\]|## Completed|## Results/i.test(Z))z="completed";else if(/\[IN PROGRESS\]|## Progress|IN PROGRESS/i.test(Z))z="running";else if(/\[FAILED\]|## Failed|ERROR/i.test(Z))z="failed";let I=Z.match(/## Task\s*\n+(.+)/i)||Z.match(/\*\*Task\*\*:\s*(.+)/i),C=I?I[1].trim().substring(0,60):"";G.push({agent:X,status:z,task:C,turn:Tx(x,X)})}}}catch{}return G}function Dx(x){let G=O5(x),$=R5(x).map((N)=>({...N,turn:Tx(x,N.agent)}));if($.length===0)$=q5(x);if($.length===0)try{let N=c1(x).filter((Z)=>Z.startsWith("progress-")&&Z.endsWith(".md"));for(let Z of N){let Q=Z.replace(/^progress-/,"").replace(/\.md$/,"");$.push({agent:Q,status:"running",task:"",turn:Tx(x,Q)})}}catch{}return{session:G,agents:$,activity:M5(x),memoriesDir:x,updatedAt:new Date().toISOString()}}var B5=`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Serena Memory Dashboard</title>
  <style>
    :root { --bg:#0f0b1a;--surface:#1a1428;--surface-2:#241e33;--border:#3d2e5c;--purple:#9b59b6;--purple-light:#c39bd3;--purple-dark:#6c3483;--text:#e8e0f0;--text-dim:#8a7da0;--green:#2ecc71;--red:#e74c3c;--yellow:#f1c40f;--cyan:#1abc9c; }
    *{margin:0;padding:0;box-sizing:border-box}
    body{background:var(--bg);color:var(--text);font-family:'SF Mono','Fira Code',monospace;min-height:100vh;padding:24px}
    .header{display:flex;align-items:center;gap:16px;margin-bottom:24px;padding-bottom:16px;border-bottom:2px solid var(--border)}
    .logo{width:48px;height:48px;background:linear-gradient(135deg,var(--purple),var(--purple-dark));border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px;font-weight:bold;color:white}
    .header-text h1{font-size:20px;color:var(--purple-light)} .header-text .subtitle{font-size:12px;color:var(--text-dim)}
    .connection-badge{margin-left:auto;padding:4px 12px;border-radius:12px;font-size:11px;font-weight:600}
    .connection-badge.connected{background:rgba(46,204,113,0.15);color:var(--green);border:1px solid rgba(46,204,113,0.3)}
    .connection-badge.disconnected{background:rgba(231,76,60,0.15);color:var(--red);border:1px solid rgba(231,76,60,0.3)}
    .connection-badge.connecting{background:rgba(241,196,15,0.15);color:var(--yellow);border:1px solid rgba(241,196,15,0.3)}
    .session-bar{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:16px 20px;margin-bottom:20px;display:flex;align-items:center;gap:20px}
    .session-id{font-size:14px;font-weight:600}
    .session-status{padding:3px 10px;border-radius:6px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:0.5px}
    .session-status.running{background:rgba(46,204,113,0.15);color:var(--green)}
    .session-status.completed{background:rgba(26,188,156,0.15);color:var(--cyan)}
    .session-status.failed{background:rgba(231,76,60,0.15);color:var(--red)}
    .session-status.unknown{background:rgba(138,125,160,0.15);color:var(--text-dim)}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:20px} @media(max-width:900px){.grid{grid-template-columns:1fr}}
    .card{background:var(--surface);border:1px solid var(--border);border-radius:8px;overflow:hidden}
    .card-header{padding:12px 16px;border-bottom:1px solid var(--border);font-size:13px;font-weight:600;color:var(--purple-light);background:var(--surface-2)}
    .card-body{padding:16px}
    .agent-table{width:100%;border-collapse:collapse;font-size:13px}
    .agent-table th{text-align:left;padding:8px 12px;color:var(--text-dim);font-weight:500;font-size:11px;text-transform:uppercase;letter-spacing:0.5px;border-bottom:1px solid var(--border)}
    .agent-table td{padding:10px 12px;border-bottom:1px solid rgba(61,46,92,0.4)} .agent-table tr:last-child td{border-bottom:none}
    .status-dot{display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:6px}
    .status-dot.running{background:var(--green);box-shadow:0 0 6px var(--green)} .status-dot.completed{background:var(--cyan)} .status-dot.failed{background:var(--red)} .status-dot.blocked{background:var(--yellow)} .status-dot.pending{background:var(--text-dim)}
    .activity-list{list-style:none;font-size:12px} .activity-list li{padding:8px 0;border-bottom:1px solid rgba(61,46,92,0.3);display:flex;gap:8px} .activity-list li:last-child{border-bottom:none}
    .activity-agent{color:var(--purple-light);font-weight:600;white-space:nowrap} .activity-msg{color:var(--text-dim)}
    .empty{color:var(--text-dim);font-size:12px;font-style:italic;padding:12px 0}
    .footer{margin-top:20px;padding-top:12px;border-top:1px solid var(--border);display:flex;justify-content:space-between;font-size:11px;color:var(--text-dim)}
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:0.4}} .pulse{animation:pulse 2s ease-in-out infinite}
  </style>
</head>
<body>
  <div class="header"><div class="logo">S</div><div class="header-text"><h1>Serena Memory Dashboard</h1><div class="subtitle">Real-time agent orchestration monitor</div></div><div class="connection-badge connecting" id="connBadge">Connecting...</div></div>
  <div class="session-bar"><span>Session:</span><span class="session-id" id="sessionId">N/A</span><span class="session-status unknown" id="sessionStatus">UNKNOWN</span><span style="margin-left:auto;font-size:11px;color:var(--text-dim)" id="updatedAt">--</span></div>
  <div class="grid"><div class="card"><div class="card-header">Agent Status</div><div class="card-body"><table class="agent-table"><thead><tr><th>Agent</th><th>Status</th><th>Turn</th><th>Task</th></tr></thead><tbody id="agentBody"><tr><td colspan="4" class="empty">No agents detected yet</td></tr></tbody></table></div></div><div class="card"><div class="card-header">Latest Activity</div><div class="card-body"><ul class="activity-list" id="activityList"><li class="empty">No activity yet</li></ul></div></div></div>
  <div class="footer"><span>Serena Memory Dashboard</span><span id="footerTime">--</span></div>
  <script>
    const $=s=>document.querySelector(s);
    function normalizeStatus(s){const l=(s||'').toLowerCase();if(['running','active','in_progress','in-progress'].includes(l))return'running';if(['completed','done','finished'].includes(l))return'completed';if(['failed','error'].includes(l))return'failed';if(['blocked','waiting'].includes(l))return'blocked';return'pending'}
    function clearChildren(el){while(el.firstChild)el.removeChild(el.firstChild)}
    function createTextEl(tag,text,cls){const el=document.createElement(tag);el.textContent=text;if(cls)el.className=cls;return el}
    function renderAgents(agents){const tbody=$('#agentBody');clearChildren(tbody);if(!agents||!agents.length){const tr=document.createElement('tr'),td=createTextEl('td','No agents detected yet','empty');td.setAttribute('colspan','4');tr.appendChild(td);tbody.appendChild(tr);return}agents.forEach(a=>{const ns=normalizeStatus(a.status),tr=document.createElement('tr');tr.appendChild(createTextEl('td',a.agent));const std=document.createElement('td'),dot=document.createElement('span');dot.className='status-dot '+ns+(ns==='running'?' pulse':'');std.appendChild(dot);std.appendChild(createTextEl('span',ns,'status-text'));tr.appendChild(std);tr.appendChild(createTextEl('td',a.turn!=null?String(a.turn):'-'));tr.appendChild(createTextEl('td',a.task||''));tbody.appendChild(tr)})}
    function renderActivity(activity){const list=$('#activityList');clearChildren(list);if(!activity||!activity.length){list.appendChild(createTextEl('li','No activity yet','empty'));return}activity.forEach(a=>{const li=document.createElement('li');li.appendChild(createTextEl('span','['+a.agent+']','activity-agent'));li.appendChild(createTextEl('span',a.message,'activity-msg'));list.appendChild(li)})}
    function renderState(state){$('#sessionId').textContent=state.session?.id||'N/A';const st=(state.session?.status||'UNKNOWN').toUpperCase(),sel=$('#sessionStatus');sel.textContent=st;sel.className='session-status '+st.toLowerCase();if(state.updatedAt){const ts=new Date(state.updatedAt).toLocaleString();$('#updatedAt').textContent='Updated: '+ts;$('#footerTime').textContent=ts}renderAgents(state.agents);renderActivity(state.activity)}
    let ws,rd=1000;function connect(){const b=$('#connBadge');b.textContent='Connecting...';b.className='connection-badge connecting';const p=location.protocol==='https:'?'wss:':'ws:';ws=new WebSocket(p+'//'+location.host);ws.onopen=()=>{b.textContent='Connected';b.className='connection-badge connected';rd=1000};ws.onmessage=e=>{try{const m=JSON.parse(e.data);if(m.data)renderState(m.data)}catch{}};ws.onclose=()=>{b.textContent='Disconnected';b.className='connection-badge disconnected';setTimeout(()=>{rd=Math.min(rd*1.5,10000);connect()},rd)};ws.onerror=()=>ws.close()}
    fetch('/api/state').then(r=>r.json()).then(renderState).catch(()=>{});connect();
  </script>
</body>
</html>`;function b3(){let x=H5();if(!C5(x))Y5(x,{recursive:!0});let G=j5((Q,X)=>{if(Q.url==="/api/state")X.writeHead(200,{"Content-Type":"application/json"}),X.end(JSON.stringify(Dx(x)));else X.writeHead(200,{"Content-Type":"text/html"}),X.end(B5)}),J=new Ax.default({server:G}),$=null;function N(Q,X){if($)clearTimeout($);$=setTimeout(()=>{let z=JSON.stringify({type:"update",event:Q,file:X,data:Dx(x)});J.clients.forEach((I)=>{if(I.readyState===Ux.default.OPEN)I.send(z)})},100)}let Z=E2(x,{persistent:!0,ignoreInitial:!0,awaitWriteFinish:{stabilityThreshold:200,pollInterval:50}});Z.on("all",(Q,X)=>N(Q,f3(X))),J.on("connection",(Q)=>{Q.send(JSON.stringify({type:"full",data:Dx(x)})),Q.on("error",()=>Q.terminate())}),process.on("SIGINT",()=>{console.log(`
Shutting down...`),Z.close(),J.clients.forEach((Q)=>Q.terminate()),J.close(()=>G.close(()=>process.exit(0))),setTimeout(()=>process.exit(1),3000).unref()}),process.on("SIGTERM",()=>process.emit("SIGINT")),G.listen(w3,()=>{console.log(F0.default.magenta(`
  \uD83D\uDEF8 Serena Memory Dashboard`)),console.log(F0.default.white(`     http://localhost:${w3}`)),console.log(F0.default.dim(`     Watching: ${x}
`))})}var A5=process.argv.slice(2);if(A5[0]==="dashboard")b3();else P5().catch(console.error);var D5="first-fluke/oh-my-antigravity",Lx=`https://raw.githubusercontent.com/${D5}/main/.agent/skills`,_1={domain:[{name:"frontend-agent",desc:"React/Next.js UI specialist"},{name:"backend-agent",desc:"FastAPI/SQLAlchemy API specialist"},{name:"mobile-agent",desc:"Flutter/Dart mobile specialist"}],coordination:[{name:"pm-agent",desc:"Product manager - task decomposition"},{name:"qa-agent",desc:"QA - OWASP, Lighthouse, WCAG"},{name:"workflow-guide",desc:"Manual multi-agent orchestration"},{name:"orchestrator",desc:"Automated parallel CLI execution"}],utility:[{name:"debug-agent",desc:"Bug fixing specialist"},{name:"commit",desc:"Conventional Commits helper"}]},T5={fullstack:["frontend-agent","backend-agent","pm-agent","qa-agent","debug-agent","commit"],frontend:["frontend-agent","pm-agent","qa-agent","debug-agent","commit"],backend:["backend-agent","pm-agent","qa-agent","debug-agent","commit"],mobile:["mobile-agent","pm-agent","qa-agent","debug-agent","commit"],all:[..._1.domain,..._1.coordination,..._1.utility].map((x)=>x.name)};async function _5(x){let G=["SKILL.md"],J=["resources/execution-protocol.md","resources/tech-stack.md","resources/checklist.md","resources/templates.md","resources/error-playbook.md"];for(let $ of J){let N=`${Lx}/${x}/${$}`;if((await fetch(N,{method:"HEAD"})).ok)G.push($)}return G}async function L5(x,G){let J=o1(G,".agent","skills",x),$=await _5(x);for(let N of $){let Z=`${Lx}/${x}/${N}`,Q=await fetch(Z);if(!Q.ok)continue;let X=await Q.text(),z=o1(J,N),I=U5(z);if(!l3(I))d3(I,{recursive:!0});k3(z,X,"utf-8")}return!0}async function F5(x){let G=o1(x,".agent","skills","_shared"),J=["reasoning-templates.md","clarification-protocol.md","context-loading.md","skill-routing.md"];if(!l3(G))d3(G,{recursive:!0});for(let $ of J){let N=`${Lx}/_shared/${$}`,Z=await fetch(N);if(!Z.ok)continue;let Q=await Z.text();k3(o1(G,$),Q,"utf-8")}}async function P5(){console.clear(),Z2(O1.default.bgMagenta(O1.default.white(" \uD83D\uDEF8 oh-my-antigravity ")));let x=await K2({message:"What type of project?",options:[{value:"all",label:" All",hint:"Install everything"},{value:"fullstack",label:"\uD83C\uDF10 Fullstack",hint:"Frontend + Backend + PM + QA"},{value:"frontend",label:"\uD83C\uDFA8 Frontend",hint:"React/Next.js"},{value:"backend",label:" Backend",hint:"FastAPI/Python"},{value:"mobile",label:"\uD83D\uDCF1 Mobile",hint:"Flutter/Dart"},{value:"custom",label:"\uD83D\uDD27 Custom",hint:"Choose skills"}]});if(P1(x))a0("Cancelled."),process.exit(0);let G;if(x==="custom"){let N=[..._1.domain,..._1.coordination,..._1.utility],Z=await X2({message:"Select skills:",options:N.map((Q)=>({value:Q.name,label:Q.name,hint:Q.desc})),required:!0});if(P1(Z))a0("Cancelled."),process.exit(0);G=Z}else G=T5[x]??[];let J=process.cwd(),$=I2();$.start("Installing skills...");try{await F5(J);for(let N of G)$.message(`Installing ${O1.default.cyan(N)}...`),await L5(N,J);$.stop("Skills installed!"),z2([...G.map((N)=>`${O1.default.green("")} ${N}`),"",O1.default.dim(`Location: ${o1(J,".agent","skills")}`)].join(`
`),"Installed"),Q2(O1.default.green("Done! Open your project in your IDE to use the skills."))}catch(N){$.stop("Installation failed"),N1.error(N instanceof Error?N.message:String(N)),process.exit(1)}}
